(()=>{var e,t,n,o,c,r={62810:(e,t,n)=>{var o=n(48764).Buffer;t.parse=function(e,t){e instanceof o&&(e=e.toString("ascii"));for(var n=new o(t||8192),c=0,r=0,s=null,i=null,a=0,l=0;l+11<=e.length;){if(":"!==e.charAt(l++))throw new Error("Line "+(a+1)+" does not start with a colon (:).");a++;var d=parseInt(e.substr(l,2),16);l+=2;var f=parseInt(e.substr(l,4),16);l+=4;var u=parseInt(e.substr(l,2),16);l+=2;var h=e.substr(l,2*d),m=new o(h,"hex");l+=2*d;var p=parseInt(e.substr(l,2),16);l+=2;for(var g=d+(f>>8)+f+u&255,b=0;b<d;b++)g=g+m[b]&255;if(p!==(g=256-g&255))throw new Error("Invalid checksum on line "+a+": got "+p+", but expected "+g);switch(u){case 0:var k=r+f;if(k+d>=n.length){var w=new o(2*(k+d));n.copy(w,0,0,c),n=w}k>c&&n.fill(255,c,k),m.copy(n,k),c=Math.max(c,k+d);break;case 1:if(0!==d)throw new Error("Invalid EOF record on line "+a+".");return{data:n.slice(0,c),startSegmentAddress:s,startLinearAddress:i};case 2:if(2!==d||0!==f)throw new Error("Invalid extended segment address record on line "+a+".");r=parseInt(h,16)<<4;break;case 3:if(4!==d||0!==f)throw new Error("Invalid start segment address record on line "+a+".");s=parseInt(h,16);break;case 4:if(2!==d||0!==f)throw new Error("Invalid extended linear address record on line "+a+".");r=parseInt(h,16)<<16;break;case 5:if(4!==d||0!==f)throw new Error("Invalid start linear address record on line "+a+".");i=parseInt(h,16);break;default:throw new Error("Invalid record type ("+u+") on line "+a)}"\r"===e.charAt(l)&&l++,"\n"===e.charAt(l)&&l++}throw new Error("Unexpected end of input: missing or invalid EOF record.")}},2766:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var o=n(23645),c=n.n(o)()((function(e){return e[1]}));c.push([e.id,"img {\n  display: block;\n  max-width: 100%;\n  max-height: 100%;\n  margin: 0 auto;\n  -webkit-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-user-drag: none;\n}\n.img-box {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-bottom: 100%;\n}\n.img-box > img {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  padding: 1rem;\n  object-fit: contain;\n}\n",""]);const r=c},40334:(e,t,n)=>{"use strict";var o=n(93379),c=n.n(o),r=n(2766),s={insert:"head",singleton:!1},i=c()(r.default,s);if(!r.default.locals||e.hot.invalidate){var a=r.default.locals;e.hot.accept(2766,(t=>{r=n(2766),function(e,t,n){if(!e&&t||e&&!t)return!1;var o;for(o in e)if((!n||"default"!==o)&&e[o]!==t[o])return!1;for(o in t)if(!(n&&"default"===o||e[o]))return!1;return!0}(a,r.default.locals,void 0)?(a=r.default.locals,i(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()}));r.default.locals},84495:(e,t,n)=>{"use strict";n.d(t,{u:()=>f});var o=n(67294),c=n(73935),r=n(28216),s=n(29558),i=n(20271),a=n(11379);const l=o.lazy((()=>Promise.all([n.e(733),n.e(193),n.e(3),n.e(832),n.e(570),n.e(929)]).then(n.bind(n,50727)))),d=()=>{const{locale:e,messages:t,rtl:n,intlId:c}=(0,a.i)((({intl:e})=>e));return o.createElement(i.ZP,{direction:n?"rtl":"ltr"},o.createElement(s.Z,{locale:e,messages:t[c]},o.createElement(o.Suspense,{fallback:null},o.createElement(l,null))))},f=(e,t)=>new Promise((n=>{let s=null;s="string"==typeof e?document.querySelector(e):e,c.render(o.createElement(r.Provider,{store:t},o.createElement(d,null)),s,(()=>{n(!0)}))}))},97770:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c.a,C7:()=>o.MESSAGE_TYPE});var o=n(77212),c=n.n(o),r=n(33372),s=n(66675);"production"===r.Z.nodeEnv?c().env=o.CLIENT_ENV.PROD:"test"===r.Z.nodeEnv?c().env=o.CLIENT_ENV.TEST:c().env=o.CLIENT_ENV.DEV;(()=>{const{href:e,protocol:t,replace:n}=window.location;"file:"===t&&(c().useLocalstorage=!0,c().storage.strategy="localstorage"),c().mode=o.PAGE_MODE.WIN,c().showSocialLogin=!0,c().showSwitchHost=!0,c().intl=s.ZP.envUtils.isInternational;const r=(()=>{const{search:e,hash:t}=window.location;if(e)return e;{const[,e=""]=t.split("?");return e}})(),i=new URLSearchParams(r),a=i.get("code"),l=i.get("utoken");if("0"===a&&l){const t=e.replace(r,"").replace("?","");c().token=l,n(t)}})();c().token},76995:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(67294);n(40334);const c=/^https:\/\/.*\.(jpe?g|png)$/,r=e=>{const{url:t="",alt:n="",cut:r=!1,imgRef:s=null,style:i,boxStyle:a,className:l,boxClassName:d}=e,[f,u]=(0,o.useState)(""),[h,m]=(0,o.useState)("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNjIyNzE1MzMwOTYwIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjYxMzAiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTQzOS4wNTcwMjc1OSA2MjIuMTQ1NTk3NThhMTMuOTc3MDk2NDEgMTMuOTc3MDk2NDEgMCAxIDAgMTguOTkwNjIwMTYgNS4xMDg0NzY5NiAxMy45NzcwOTY0MSAxMy45NzcwOTY0MSAwIDAgMC0xOC45OTA2MjAxNi01LjEwODQ3Njk2ek01MDYuMzAyODEzOTEgNjQxLjEzNjIxODA5YTEyLjQxOTg2NTY3IDEyLjQxOTg2NTY3IDAgMSAwIDE2Ljk3NzYxNDU0IDQuNTM4NzU4MDNBMTIuNDAwODc1MTcgMTIuNDAwODc1MTcgMCAwIDAgNTA2LjMwMjgxMzkxIDY0MS4xMzYyMTgwOXpNNTczLjY0MzU1MzQ3IDYyNC43MjgzMjIxOGExMC44MDU2NjMwNiAxMC44MDU2NjMwNiAwIDEgMCAxNC43MzY3MjE0NCAzLjk1MDA0ODg5IDEwLjgwNTY2MzA2IDEwLjgwNTY2MzA2IDAgMCAwLTE0LjczNjcyMTQ1LTMuOTUwMDQ4OXpNNjIzLjQxNzk2OTM3IDU3Ny45OTI0MDU0YTguNTgzNzYwNDkgOC41ODM3NjA0OSAwIDEgMCAxMS43MTcyMTI0OCAzLjE1MjQ0MzIgOC42MDI3NTA5OSA4LjYwMjc1MDk5IDAgMCAwLTExLjcxNzIxMjQ4LTMuMTUyNDQzMnpNNjQyLjg4MzM1NDkzIDUxNC4zNzM4Mjc2NWE1LjI3OTM5MjU3IDUuMjc5MzkyNTcgMCAxIDAgNy4yMzU0MjYzNCAxLjg5OTA2MTkxIDUuMjk4MzgzMDUgNS4yOTgzODMwNSAwIDAgMC03LjIzNTQyNjM0LTEuODk5MDYxOTF6TTM4OS43NTczNzcwNyA1NzIuMDg2MzIyNzFhMTUuMzgyNDAyNDQgMTUuMzgyNDAyNDQgMCAxIDAgMjEuMDIyNjE2NjYgNS42OTcxODYxMSAxNS40MDEzOTI5NCAxNS40MDEzOTI5NCAwIDAgMC0yMS4wMjI2MTY2Ni01LjY5NzE4NjExek0zODcuMTE3NjgwOTYgNDM0LjU5NDIzMTU4YTIwLjY2MTc5NSAyMC42NjE3OTUgMCAxIDAgMjguMjM5MDUyNSA3LjU5NjI0ODM1IDIwLjY4MDc4NTUgMjAuNjgwNzg1NSAwIDAgMC0yOC4yMzkwNTI1LTcuNTk2MjQ4MzZ6TTM5NC43NzA5MDA4MyA1MTAuMjE0ODgxODFhMTcuNDkwMzYxMjggMTcuNDkwMzYxMjggMCAxIDAtNi4zOTk4Mzg5MiAyMy44OTAyMDAyMSAxNy41MDkzNTE3OCAxNy41MDkzNTE3OCAwIDAgMCA2LjM5OTgzODkyLTIzLjg5MDIwMDIxek00OTkuMzkwMjI4MjUgMzYzLjE4OTQ5OTQxYTI2LjM1ODk4MTA4IDI2LjM1ODk4MTA4IDAgMSAwIDM2LjA4MjE3ODQzIDkuNjQ3MjM0OTcgMjYuMzU4OTgxMDggMjYuMzU4OTgxMDggMCAwIDAtMzYuMDgyMTc4NDMtOS42NDcyMzQ5N3pNNDM0LjQ2MTI5NzM2IDM4My42NjEzODc5NmEyMy4yODI1MDA1OCAyMy4yODI1MDA1OCAwIDEgMCAzMS44MDkyODg4NiA4LjUyNjc4ODYzIDIzLjI4MjUwMDU4IDIzLjI4MjUwMDU4IDAgMCAwLTMxLjgwOTI4ODg3LTguNTI2Nzg4NjN6TTU5NC4xNTM0MjMzOCA0MzAuMTY5NDE3MjhhMzAuMzg0OTkyMzMgMzAuMzg0OTkyMzMgMCAxIDAtNDEuNTUxNDc3MDktMTEuMTI4NTAzNzMgMzAuMzg0OTkyMzMgMzAuMzg0OTkyMzMgMCAwIDAgNDEuNTUxNDc3MDggMTEuMTI4NTAzNzN6TTY1Ny4yOTcyMzU3MyA0MzUuMzkxODM3NjJhMzQuMTgzMTE2NTMgMzQuMTgzMTE2NTMgMCAxIDAtMTIuNTE0ODE4NTQgNDYuNjk3OTM1NDEgMzQuMTgzMTE2NTMgMzQuMTgzMTE2NTMgMCAwIDAgMTIuNTE0ODE4NTUtNDYuNjk3OTM1NDF6IiBwLWlkPSI2MTMxIiBmaWxsPSIjZGJkYmRiIj48L3BhdGg+PC9zdmc+");(0,o.useEffect)((()=>{const{webpUrl:e,nextUrl:n}=((e,t)=>{let n=e,o="";if(t&&("w"in t||"h"in t)&&c.test(e)){const{w:c,h:r}=t;n=`${e}?x-oss-process=image/resize`,c&&(n+=`,w_${c}`),r&&(n+=`,h_${r}`),o=`${n}/format,webp`}return{nextUrl:n,webpUrl:o}})(t,r);u(e),m(n)}),[t]);const p={className:d,style:a},g={className:l,style:i,src:h,onError(){m(t)}};return o.createElement("picture",Object.assign({},p),f&&o.createElement("source",{srcSet:f}),o.createElement("img",Object.assign({},g,{alt:n,ref:s})))}},33372:(e,t,n)=>{"use strict";n.d(t,{L:()=>a,Z:()=>l});const o={showHeader:!1,logo:null,supportedLangKeys:[],primaryColor:"",showCopyRightLogo:!1,ErrorComponent:null,enableShowHelp:!0,enablePresetProject:!0,hideWorkspaceBlocks:{},unconnectedImg:"",connectedImg:"",blockly:{media:"https://res-cn.makeblock.com/mblock/static/blocks-media/",collapse:!1,colours:{dragShadowOpacity:.6,fieldShadow:"rgba(255, 255, 255, 0.3)",flyout:"#ffffff",insertionMarker:"#000000",insertionMarkerOpacity:.2,scrollbar:"rgba(0, 0, 0, .08)",scrollbarHover:"rgba(0, 0, 0, .08)",toolbox:"#ffffff",toolboxSelected:"var(--BG-COLOR)",workspace:"#ffffff"},comments:!0,grid:{spacing:24,length:1,colour:"rgba(0, 0, 0, .4)",snap:!1},trashcan:!1,zoom:{controls:!1,maxScale:3,minScale:.25,startScale:.8,scaleSpeed:.125,wheel:!0}},defaultExts:["cyberpi"],domain:{},link:{},oauth:{},socket:{},lang:"zh",connect:{enableActiveMulti:!1,enablePassiveMulti:!1}};var c=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};const r={sprite:[],costume:[],backdrop:[],sound:[]},s=(e,t,n=!0)=>c(void 0,void 0,void 0,(function*(){const o=r[t];if(o){const c=o.findIndex((t=>t.md5===e.md5));return-1===c?n&&("svg"===e.dataFormat?e.src=e.encodeDataURI("image/svg+xml"):e.src=window.URL.createObjectURL(new Blob([e.data.buffer]))):(e=Object.assign(o[c],e),o.splice(c,1)),o.unshift(e),"sprite"===t&&s(e,"costume",!1),e}return!1})),i={basepath:e=>e.url?e.url:e.src?e.src:void 0,sprites:()=>c(void 0,void 0,void 0,(function*(){return r.sprite})),backdrops:()=>c(void 0,void 0,void 0,(function*(){return r.backdrop})),costumes:()=>c(void 0,void 0,void 0,(function*(){return r.costume})),sounds:()=>c(void 0,void 0,void 0,(function*(){return r.sound})),onCreate:s,onDelete:(e,t)=>c(void 0,void 0,void 0,(function*(){const{md5:n}=e,o=r[t];if(o&&n){const t=o.findIndex((e=>e.md5===n));return-1!==t&&o.splice(t,1),e}return!1})),autoCreateWebStore:!0};const a=new class{constructor(){this.config=o,this.init()}init(){this.initServer(),this.initUI(),this.initResource()}initServer(){let e="development",t="zh";e="production",t="en",this.config.nodeEnv=e,this.config.international=t,this.config.domain=n(24184)("./production/en/domain.json"),this.config.link=n(95529)("./production/en/link.json")}initUI(){}initResource(){const{assets:e}=this.config.domain;this.config.spriteAssetConfig=[{basepath:`${e}assets/scratch/`,sprites:`${e}sprites/makeblock/sprites.json`,backdrops:`${e}sprites/makeblock/backdrops.json`,costumes:`${e}sprites/makeblock/costumes.json`,sounds:`${e}sprites/makeblock/sounds.json`,tags:`${e}sprites/tags.json`,autoCreateWebStore:!0},{basepath:`${e}assets/scratch/`,sprites:`${e}sprites/scratch/sprites.json`,backdrops:`${e}sprites/scratch/backdrops.json`,costumes:`${e}sprites/scratch/costumes.json`,sounds:`${e}sprites/scratch/sounds.json`,autoCreateWebStore:!0}],this.config.userSpriteAssetConfig=i}setConfig(e){this.validateConfig(e),this.config=Object.assign(Object.assign({},this.config),e)}validateConfig(e){}},l=a.config},84024:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={CONNECT_TYPE:{SERIAL:"serialport",BLUETOOTH:"bluetooth",BLE:"ble",HID:"hid",WIRELESS:"wireless",WIFI:"wifi","24G":"24g"},CONNECT_STATUS:{IDLE:"idle",CONNECTED:"connected",NOT_CONNECTED:"not_connected",NOT_SERVICE:"not_server",CONNECTING:"connecting",CONNECT_SUCCESS:"connect_success",CONNECT_FAIL:"connect_fail",CONNECT_ERROR:"connect_error",CONNECT_TIMEOUT:"connect_timeout",CONNECT_CANCEL:"connect_cancel"},SCAN_STATUS:{SCAN_READY:"scan_ready",SCANNING:"scanning",SCAN_SUCCESS:"scan_success",SCAN_FAIL:"scan_fail",SCAN_TIMEOUT:"scan_timeout",SCAN_CANCEL:"scan_cancel"},CH340:{PRODUCT_ID:29987,VERDOR_ID:6790},HID:{PRODUCT_ID:65535,VENDOR_ID:1046},MLINK_PROTOCOL:"mlink2://",MLINK_STATUS:{CHROMEOS:"chromeos",NO_INSTALL:"noinstall",NO_CONNECT:"noconnect",CONNECTED:"connected"}}},49692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o={USER_TOKEN_KEY:"utoken",INTERNATIONAL_VERSION:"InternationalVersion",APP_THEME:"AppTheme",USER_ACCESS_ACCESSTOKEN_KEY:"accesstoken",CONNECT_DEVICE_ID_KEY:"ConnectDeviceId",EXAMPLE_KEY:"exampleKey",FEEDBACK_CACHE_KEY:"Feedback",DEFAULT_DEVICE_KEY:"defaultDevice"}},98243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>F});var o=n(82669),c=n(29595),r=n(33372);var s=n(48086),i=n(67294),a=n(73935),l=n(96486),d=n(32787),f=n(48835),u=n(9676),h=n(47933),m=n(7031),p=n(15746),g=n(82482),b=n(71230),k=n(71577),w=n(10642),v=n(76995),y=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(n[o[c]]=e[o[c]])}return n};const E=["input","number","checkbox","radio","select"],_=e=>{const t=e=>{const t={};return e.forEach((e=>{(0,l.isEmpty)(e.type)||(t[e.id]=e.value)})),t},[n,o]=(0,i.useState)(t(e.config.fields)),[c,r]=(0,i.useState)({}),[s,a]=(0,i.useState)(!1),[_,x]=(0,i.useState)({}),T=(0,i.useRef)({});(0,i.useEffect)((()=>{const c=t(e.config.fields);(0,l.isEqual)(n,c)||o(c)}),[e.config.fields]);const I=t=>{const{formatMessage:n}=e;if(t&&!(0,l.isEmpty)(t)){let e="div",o="",c={};(0,l.isString)(t)?o=t:(0,l.isObject)(t)&&(e=t.tag||"div",o=t.text,c=t.style||{}),o=n({id:o,defaultMessage:o});const r={__html:o},s=i.createElement("div",{dangerouslySetInnerHTML:r});return i.createElement(e,{style:c},s)}return null},M=t=>{const{type:o,value:c,props:r={},onChange:s}=t,{formatMessage:a}=e;if(!(0,l.isUndefined)(o)&&!(0,l.isUndefined)(c)&&!(0,l.isEmpty)(o))switch(o.toLowerCase()){case"image":return i.createElement("p",null,i.createElement(v.Z,{url:c,style:{maxWidth:"100%",display:"block"}}));case"text":return i.createElement("p",null,a({id:c.toString(),defaultMessage:c.toString()}));case"input":return i.createElement(d.Z,Object.assign({},r,{style:{width:"100%"},defaultValue:n[t.id]||t.value,onChange:e=>O(t.id,e.target.value,s)}));case"number":return i.createElement(f.Z,{style:{width:"100%"}});case"checkbox":return i.createElement(u.Z,null);case"radio":return i.createElement(h.ZP,null);case"select":return C(t)}return null},C=e=>{const{props:t,id:s}=e,a=Object.assign({},((e={},t)=>{const{onBlur:s=(()=>{}),onSearch:i,onSelect:a=(()=>{}),onDeselect:l=(()=>{}),onFocus:d=(()=>{}),onPopupScroll:f=(()=>{}),onInputKeyDown:u=(()=>{}),onMouseEnter:h=(()=>{}),onMouseLeave:m=(()=>{})}=e,p=y(e,["onBlur","onSearch","onSelect","onDeselect","onFocus","onPopupScroll","onInputKeyDown","onMouseEnter","onMouseLeave"]),g=e=>{if(e instanceof Array&&e.length>0){const n=Object.assign({},c,{[t]:e});r(n)}},b=e=>{const c=Object.assign({},n,{[t]:e});o(c)};let k=Object.assign({onBlur:()=>{s()},onFocus:()=>{d()},onSelect:e=>{a(e,b)},onDeselect:(...e)=>{l(...e)},onPopupScroll:()=>{f()},onInputKeyDown:(...e)=>{u(...e)},onMouseEnter:(...e)=>{h(...e)},onMouseLeave:(...e)=>{m(...e)},onChange:e=>{b(e)}},p);return i&&(k=Object.assign({showSearch:!0,onSearch:e=>{i(e,g)}},k)),k})(t,s));return i.createElement(m.Z,Object.assign({style:{width:"100%"},value:n[e.id]||e.value},a),S(c[s]||e.options))},S=t=>{const{formatMessage:n}=e,o=[],c=e=>{try{for(let t=0;t<e.length;t++){const c=e[t],r=(0,l.isString)(c)?c:c.text,s=(0,l.isString)(c)?c:c.value.toString();o.push(i.createElement(m.Z.Option,{key:t,value:s},n({id:r,defaultMessage:r})))}}catch(e){}};if((0,l.isFunction)(t)){const e=t();e instanceof Promise?e.then((e=>{c(e)})):c(e)}else(0,l.isArray)(t)&&c(t);return o},O=(e,t,c)=>(n[e]=t,o(n),(0,l.isFunction)(c)&&c(t),t),N=t=>{try{if(t&&!(0,l.isEmpty)(t))return i.createElement(b.Z,{gutter:16},t.map(((t,n)=>((t,n)=>{const{layout:o={span:24,style:{}}}=t,{span:c,style:r}=o,s={id:t.id||`cfgUIField${n}`,key:n,span:c,style:r};if(t.type&&-1!==E.indexOf(t.type)){const{formatMessage:n}=e,o=t.label||"";return i.createElement(p.Z,Object.assign({},s),i.createElement(g.Z.Item,{label:n({id:o,defaultMessage:o}),extra:t.info},M(t)))}return i.createElement(p.Z,Object.assign({},s),I(t.label),M(t),I(t.info))})(t,n))))}catch(e){}return null},D=(e,t)=>{_[e]=t,a(t),x(_)},A=t=>t&&!(0,l.isEmpty)(t)?i.createElement("section",{className:"button-container"},t.map(((t,o)=>{const{id:c,type:r="primary",ghost:s,style:a={}}=t,d=_[c],f={type:r,ghost:s,style:a,key:o,ref:e=>T.current[c]=e,loading:d,onClick:()=>(t=>{const{id:o,handle:c}=t,r={values:n,button:T.current[o],close:e.onCancel||(()=>{})};if(c&&(0,l.isFunction)(c)){const e=c(r);e instanceof Promise&&(D(o,!0),e.then((()=>{D(o,!1)})).catch((e=>{})))}else r.close()})(t)},{formatMessage:u}=e;let h=t.text;return d&&(h=t.loadingText||t.text),h=u({id:h,defaultMessage:h}),i.createElement(k.Z,Object.assign({key:h},f),h)}))):null,{visible:j,onCancel:P,config:L}=e,{formatMessage:z}=e;if(L&&!(0,l.isEmpty)(L)){const{title:e,width:t=480,maskClosable:n=!1,closable:o=!0,fields:c,buttons:r}=L,a=!s&&o;let l=e;return e&&(l=z({id:e,defaultMessage:e})),i.createElement(w.Z,{title:l,destroyOnClose:!0,className:"custom-modal",width:t,visible:j,keyboard:a,maskClosable:n,closable:a,footer:A(r),onCancel:P},N(c))}return null};class x extends i.Component{constructor(e){super(e),this.state={visible:!1,config:e.config}}componentDidMount(){this._changeVisible(!0)}_changeVisible(e){const{visible:t}=this.state;t!==e&&this.setState({visible:e})}open(e){(0,l.isEqual)(e,this.state.config)||this.setState({config:e}),this._changeVisible(!0)}show(){this._changeVisible(!0)}close(){this._changeVisible(!1)}render(){const{formatMessage:e}=this.props,{visible:t,config:n}=this.state,o={config:n,visible:t,formatMessage:e,onCancel:this.close.bind(this)};return i.createElement(_,Object.assign({},o))}}const T={id:"connect",disconnect:()=>{o.ZP.emit("disconnect")},setConnectBtnState:e=>{o.ZP.emit("enableConnectBtn",e)}};var I=n(66675);const M={id:"iot",getDomain:e=>new Promise((t=>{let n="";const o=I.ZP.envUtils.isInternational;"cloudList"===e?n=(0,I.rw)(r.Z.domain.iot,o):"weather"===e?n=(0,I.rw)(r.Z.domain.weather,o):"air"===e&&(n=(0,I.rw)(r.Z.domain.air,o)),t(n)}))};var C=n(58038);class S{constructor(){this.init(),this.cmdList=[]}init(){this.client=C.Z.runtime.client,this.client.on("mnode_from_server",this.onData.bind(this))}registerCmdHandler(e,t){this.cmdList[e]=t}onData(e,t){const n=this.cmdList[e];n&&n(t)}getInfo(e,t,n){n||(n=t,t=null),this.execute(e,t),this.registerCmdHandler(e,n)}execute(e,t){this.client.isConnected||C.Z.runtime.establishChannel(),this.client.emit("mnode_from_client",e,t)}}var O=n(20743);let N=null;var D=n(40186);const A=new(n(85413).Qm),j={id:"firmware.uploader",getDriver:e=>A.getDriverByName(e,!0)},P={id:"code.uploader",getDriver:e=>A.getDriverByName(e,!1)},L={};(()=>{window.MbApi||(window.MbApi={}),Object.assign(window.MbApi,{projectChange:()=>{},getAssetsPath:()=>r.Z.domain.assets,getExtResPath:(e,t)=>{const n=(new Date).getTime();if("DeepLearning"===t&&"js"===I.ZP.getFileSuffix(e))return`${window.MbApi.getAssetsPath()}exts/${e}?${n}`;const o=t.toLowerCase();return`${L[o]||""}${e}`},require:(e,t=!1,n)=>{if(!(0,l.isString)(e))return Promise.reject(new Error(`url: '${e}' is error.`));const o=t?e:window.MbApi.getExtResPath(e,n);return new Promise(((e,t)=>{(0,D._)(o).then((t=>{e(t)})).catch((e=>{}))}))},Emitter:o.ZP});window.alert=function(e="",t="info",n=2,o){e&&s.ZP[t](e,n,o)}})();const z={Account:e=>{const{getState:t}=e,n=()=>{const{userInfo:e,isIntl:n}=t().passport;return e&&(e.intl=n),e};return{id:"account",getToken:()=>{const{token:e}=t().passport;return Promise.resolve(e)},getServiceKey:(e,t)=>n().accesstoken?Promise.resolve(n().accesstoken):c.Z.post(r.Z.domain.passport2,"v1/accesstoken/generate/byutoken",{name:e,option:t}),getUserInfo:()=>Promise.resolve(n()),onLogin:e=>(o.ZP.on(o.U3.user.login,e),()=>{o.ZP.removeListener(o.U3.user.login,e)}),onLogout:e=>(o.ZP.on(o.U3.user.logout,e),()=>{o.ZP.removeListener(o.U3.user.logout,e)}),isLogin:()=>Promise.resolve(Boolean(n()))}},SystemUi:e=>{const t=n=>{if("object"==typeof n&&void 0!==n.id)return t(n.id);if("string"==typeof n){const t=n.split(".");let o;return o=2===t.length?e.fmtMsg(t[1],t[0]):e.fmtMsg(n),o}return e.fmtMsg(n)},n=(()=>{const e=new Map;let n;return(o,c,r=!1)=>{let s=null;return e.has(o)?s=e.get(o):(s=((o,c)=>{const r=i.createElement(x,{config:c,formatMessage:t,ref:t=>{n={open:t.open.bind(t),show:t.show.bind(t),close:t.close.bind(t)},e.set(o,n)}}),s=document.createElement("section");return s.setAttribute("id",o),document.body.appendChild(s),a.render(r,s),n})(o,c),e.set(o,s)),r&&s.open(c),s}})(),o={id:"system.ui",alert:(e,n="warn",o=2)=>new Promise(((c,r)=>{e?c(s.ZP[n](t(e),o)):r("éœ€è¦ä¼ å…¥æ˜¾ç¤ºçš„ alert å†…å®¹")})),message:(e,n="info",o=2)=>new Promise(((c,r)=>{e?c(s.ZP[n](t(e),o)):r("éœ€è¦ä¼ å…¥æ˜¾ç¤ºçš„ message å†…å®¹")})),dialog:(e,t,o=!0)=>new Promise((c=>{c(n(e,t,o))}))};return o},Env:e=>{const{getState:t}=e;return{id:"env",getInternationalVertion:()=>new Promise((e=>{e(!1)})),getLocaleLang:()=>new Promise((e=>{e(t().intl.locale)}))}},Connect:T,uiFirmware:e=>({id:"system.ui.firmware.uploader",open:t=>{e.dispatch(O.Z.open(t,N))},onOK:e=>{N=e},onFail:e=>{}}),Iot:M,Udp:e=>{const t={};class n{constructor(){const t=e.getState().connect,{connectionInfo:{connectionId:n}}=t;e.ConnectService.addDataListener("TYPE",n,(e=>{this._onConnectReceived(e)}))}get wifiChannel(){const t=e.getState().connect,{connectionInfo:{connectionId:n}}=t;return{write(t,o,c,r,s){e.ConnectService.send("wifi",n,o,{type:t,hostname:c,port:r},s)}}}send(e,t,n){return e=e.toString(),new Promise(((c,r)=>{this.wifiChannel.write("send",e,n,t,((e,t)=>{e&&(o.ZP.emit("disconnect",e),r(e)),c(t)}))}))}onMessage(e,t,n){this.wifiChannel.write("onMessage",null,t,e),this._registerOnReceive(t,e,n)}close(e,t){this.wifiChannel.write("closeUdp",null,t,e)}_onConnectReceived(e){const n=(0,I.zT)(e).split("|");t[n[0]]&&t[n[0]](n[1])}_registerOnReceive(e,n,o){t[e+":"+n]=o}}const c={};return{id:"udp",getInstance:()=>new n,create(){const e=new n,t=(new Date).getTime();return c[t]=e,t},dispose(e){c[e].close(),c[e]=null},close(e,t,n){c[n].close(e,t)},send(e,t,n,o){c[o].send(n,e,t)},onMessage(e,t,n,o){c[o].onMessage(e,t,n)},getInfo(e,t,n){(new S).getInfo(e,t,n)}}},Project:e=>({id:"project",getProjectName:()=>{const{getState:t}=e;return new Promise((e=>{const{name:n}=t().project;e(n)}))}}),firmwareUploader:j,codeUploader:P};var Z=n(47872),U=n(22019),B=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};class R{static setmAppService(){for(const e in z)"function"==typeof z[e]?this.appCtx.registService(z[e](this)):this.appCtx.registService(z[e])}static setup(){return Promise.all([n.e(832).then(n.bind(n,46960)),n.e(348).then(n.bind(n,93400)),Promise.all([n.e(315),n.e(218)]).then(n.bind(n,84919)),Promise.all([n.e(130),n.e(733),n.e(133),n.e(570),n.e(377)]).then(n.bind(n,52038)),Promise.all([n.e(130),n.e(368),n.e(345),n.e(905)]).then(n.bind(n,78688)),Promise.all([n.e(193),n.e(968)]).then(n.bind(n,98922)),n.e(491).then(n.bind(n,59002)),n.e(36).then(n.bind(n,6104))]).then((e=>{const[{default:t},{default:n},{default:o},{default:c},{default:r},{AppContext:s,DeviceContext:i,BlockContext:a},{default:l},{default:d}]=e;return{Mi18n:t,ExtManager:n,BlocklyContext:o,StageContext:r,VmContext:c,AppContext:s,DeviceContext:i,BlockContext:a,ConnectService:l,PortManager:d}})).then((e=>{const{Mi18n:t,ExtManager:n,BlocklyContext:o,StageContext:c,VmContext:r,AppContext:s,DeviceContext:i,ConnectService:a,PortManager:l}=e;this.intlCtx=t,this.vmCtx=new r,this.stageCtx=new c(this.vmCtx),this.blocklyCtx=new o,this.ConnectService=new a(I.ZP.platform.isChromeOS?"chromeos":"native"),this.PortManager=l,this.extCtx=new n,this.appCtx=new s,this.deviceCtx=i,i.postSpriteInfo=(e,t)=>{const n=this.vmCtx.runtime.getSpriteTargetByName(e);n&&n.postSpriteInfo(t)},this.vmCtx.mCtx=this,this.blocklyCtx.mCtx=this,this.extCtx.mCtx=this,this.extCtx.init(),this.appCtx.mCtx=this,this.appCtx.fmtMsg=this.fmtMsg.bind(this)}))}static loadExt(e){return B(this,void 0,void 0,(function*(){const{id:t,extractPath:n,main:o,device:c,extraInfo:r={}}=e,s=t.toLocaleLowerCase(),{fromScratch3:i,mainDevice:a,relatedExts:l}=r||{};if(Boolean(a))return yield this.loadSku({targetInfo:e,mainDevice:a,relatedExts:l}),void this.blocklyCtx.updateLoadedExtsInAllTargets();((e,t)=>{e&&(e=e.toLowerCase()),L[e]=t})(t,n),yield this.intlCtx.addExtMessage(t);let d=this.extCtx.getExt(s);if(!d){const e=yield(0,D._)(`${n||""}${o}`);d=yield this.extCtx.load(t,e,i)}if(!0===c){const e=Object.assign({},d.deviceInfo);yield this.vmCtx.addDeviceTarget(t,t,e)}return yield this.extCtx.emitExtHandler("loaded",t),this.blocklyCtx.updateTargetToolboxOfXml(this.vmCtx.target),this.blocklyCtx.updateSelectedCate(null==d?void 0:d.defaultCateId),this.blocklyCtx.updateLoadedExtsInAllTargets(),d}))}static loadSku(e){return B(this,void 0,void 0,(function*(){const{targetInfo:t,mainDevice:n,relatedExts:o}=e,c=[n,...o];let r,s=[];try{const e=yield U.Z.getRequestResult("",{ids:c});s=e.list.filter((e=>e.device)).concat(e.list.filter((e=>!e.device)))}catch(e){}for(const e of s)if(e.device){const t=(0,l.cloneDeep)(e);t.device=!1,r=yield this.loadExt(t)}else yield this.loadExt(e);const{extId:i,coverURL:a}=t,d=r.id,f=Object.assign({},r.deviceInfo,{name:i,icon:a});yield this.vmCtx.addDeviceTarget(i,d,f);const{id:u,version:h}=t;this.extCtx.skus.set(this.vmCtx.target.id,{skuId:u,skuVersion:h})}))}static unloadExt(e){this.extCtx.unload(e),this.blocklyCtx.updateTargetToolboxOfXml(this.vmCtx.target)}static unloadDevice(e,t=[]){const n=this.vmCtx.targets,o=(0,l.some)(n,{deviceId:e}),c=e=>(0,l.some)(n,(t=>t.loadedExtIds.includes(e)));for(const e of t)c(e)||this.unloadExt(e);o||this.unloadExt(e)}static canUnloadExt(e){return this.extCtx.canUnload(e)}static loadExtsById(e){return B(this,void 0,void 0,(function*(){if(!(0,l.isArray)(e))throw new Error("ids should be an array.");if(e.length>0){const t=yield U.Z.getRequestResult("",{ids:e}),{list:n}=t,o=n.map((e=>this.loadExt(e)));return Promise.all(o)}}))}static checkFirmware(e){var t;return B(this,void 0,void 0,(function*(){let n=!1;if((null===(t=this.extCtx.getExt(e.deviceId))||void 0===t?void 0:t.getCheckFirmwareInForce())||e.online){n=!1;const t=this.extCtx.getExt((null==e?void 0:e.deviceId)||"");if(!t)return;const o=t.getSettings();if(!((0,l.isArray)(o)&&o.length>0))return;const c=o.find((e=>(0,l.has)(e.handle,"check")&&(0,l.isFunction)(e.handle.check)));if(!c)return;const r=this.deviceCtx.getEditingTarget(this.vmCtx.target),s=c.handle.check(this.appCtx,r,this.vmCtx.target.extInfo);if(s instanceof Promise){const e=yield s;(0,l.isBoolean)(e)?(c.showDot=e,n=e):(0,l.isPlainObject)(e)&&(c.showDot=!e.isLatest,n=c.showDot)}else c.showDot=Boolean(s),n=c.showDot}return n}))}static getCode(){return B(this,void 0,void 0,(function*(){const{blocklyCtx:e,vmCtx:t,extCtx:n}=this,o=e.getExt();if(!o)return;const c=yield o.initGen(),r=Array.from(c.connectExts),s=t.target.loadedExtIds.concat(o.id),i=(0,l.xor)(r,s);for(const e of i){n.getExt(e).connectExt2Gen(c),c.connectExts.add(e)}return this.blocklyCtx.getCode(c)}))}static getTargetSpriteId(e){return e.deviceId?e.deviceId:e.isStage?Z.fN:Z.bZ}static beforeLoadProject(){this.vmCtx.dispose()}static fmtMsg(e,t){const n=this.intlCtx.getExtMessage(t);let o;if((0,l.isPlainObject)(e)){const{id:t=""}=e;o=(0,l.get)(n,t)||e.default||JSON.stringify(e)}else o=(0,l.get)(n,e)||e;return o}static formatExtMessage(e){let t="";return e.includes(".")&&([t,e]=e.split(".")),R.fmtMsg(e,t)}static updateIntl(e,t=!1){return B(this,void 0,void 0,(function*(){yield this.intlCtx.update(e,t);const{exts:n}=this.extCtx;for(const[e,t]of n)yield this.intlCtx.addExtMessage(e),t.updateIntl();this.blocklyCtx.updateIntl()}))}static updateTargetXml(){const e=this.vmCtx.target,t=(e.loadedExtIds||[]).slice();e.deviceId&&t.push(e.deviceId);let n=[];for(const e of t){const t=this.extCtx.getDisableBlocks(e);n=[...n,...t]}n=Array.from(new Set(n)),this.blocklyCtx.setTargetXml(e,n)}}const F=R},47872:(e,t,n)=>{"use strict";n.d(t,{bZ:()=>c,fN:()=>r,B3:()=>s,ze:()=>i});var o=n(40186);const c="sprites",r="stage",s=["#0FBD8C","#0DA57A","#0B8E69"],i=(()=>{let e=!1;return()=>e?Promise.resolve(!0):new Promise(((t,n)=>{(0,o._)("js/web-worker-rpc.js",!0).then((()=>{e=!0,t(!0)}))}))})()},40186:(e,t,n)=>{"use strict";n.d(t,{_:()=>o,S:()=>c});const o=(e,t=!1)=>new Promise(((o,c)=>{n.e(430).then(n.bind(n,23926)).then((n=>{const{requirejs:r,define:s}=n;if(!t){const e="https://res-cn.makeblock.com/mblock/static/";r.config({baseUrl:e,waitSeconds:10})}window.define=s,r([e],(e=>o(e&&"default"in e?e.default:e)),(e=>{c(e)}))})).catch(c)})),c=(e,t,n)=>({objName:e,isStage:!1,costumes:[{costumeName:t,baseLayerID:0,baseLayerMD5:"06d70cb3d65abe36615f0d51e08c3404.svg",bitmapResolution:1,rotationCenterX:47,rotationCenterY:55}],deviceId:t,extInfo:n,currentCostumeIndex:0,scratchX:0,scratchY:0,scale:1,direction:90,rotationStyle:"normal",isDraggable:!1,indexInLibrary:1,visible:!1,spriteInfo:{},online:!n.enableUpload||0===n.enableUpload.length||!!n.defaultOnline,codeTypes:n.codeTypes[0],projectVersion:3})},77563:(e,t,n)=>{"use strict";var o=n(11379),c=n(98243),r=n(72463),s=n(33372),i=n(84495),a=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};n.e(976).then(n.bind(n,77069));class l{constructor(e){e&&s.L.setConfig(e)}inject(e){return a(this,void 0,void 0,(function*(){try{yield c.Z.setup();const{lang:t,defulatLocale:n}=c.Z.intlCtx;yield c.Z.intlCtx.setExtIdsIsTranslated(t),t!==n&&(yield c.Z.updateIntl(t,!0));const r=yield(0,o.Z)();c.Z.getState=r.getState,c.Z.dispatch=r.dispatch,c.Z.setmAppService(),(0,i.u)(e,r)}catch(e){}}))}getThemes(){return["mblock_light","mblock_night"]}setTheme(e){this.getThemes().includes(e)}static get theme(){return r.Z.appTheme}setLang(e){}static get version(){return r.Z.appVersion}}(new l).inject("#mblockApp"),e.hot.accept()},88478:(e,t,n)=>{"use strict";n.d(t,{if:()=>o,di:()=>c,NE:()=>r,A9:()=>s,sg:()=>i,f1:()=>a,ek:()=>l,yw:()=>d,WX:()=>f,Md:()=>u,ZQ:()=>h,bQ:()=>m,Sg:()=>p,ZJ:()=>g,Hx:()=>b,oH:()=>k,N4:()=>w,TI:()=>v,B4:()=>y,jR:()=>E,Xm:()=>_,y9:()=>x,Gw:()=>T,Lf:()=>I,Gv:()=>M,pQ:()=>C,wN:()=>S,ER:()=>O,QH:()=>N,jv:()=>D,fM:()=>A,_n:()=>j,A2:()=>P,Yr:()=>L,V0:()=>z,B8:()=>Z,yU:()=>U,cA:()=>B,cn:()=>R,Fc:()=>F,er:()=>q,OB:()=>H,M8:()=>Y,BP:()=>V,rA:()=>$,ej:()=>K,Db:()=>G,S7:()=>Q,FF:()=>W,C3:()=>J,oK:()=>X,ks:()=>ee,PS:()=>te,N9:()=>ne,TE:()=>oe,kq:()=>ce,fc:()=>re,Lo:()=>se,$9:()=>ie,E$:()=>ae});const o="setting/SETTING_THEME_MODE",c="setting/SETTING_AUTOCOLOSE_FLYOUT",r="setting/SETTING_GRID_SNAP",s="setting/SETTING_VISIBLE",i="setting/SETTING_WORKSPACE_SCALE",a="setting/SETTING_CODE_FONTSIZE",l="setting/STATE",d="intl/LANG",f="assets/CREATE_ASSET",u="targets/TARGETS_UPDATE",h="targets/SET_TARGET_TAB",m="toolbox/UPDATE_TOOLBOX_XML",p="modal/SET_SPRITE_MODAL_VISIBLE",g="modal/SET_DEVICE_MODAL_VISIBLE",b="modal/SET_EXTCENTER_VISIBLE",k="modal/SET_RECORD_MODAL_VISIBLE",w="modal/SET_PROJECT_MODAL_VISIBLE",v="modal/SET_DELETE_PROJECT_MODAL_VISIBLE",y="modal/SET_SAVE_CONFIRM_VISIBLE",E="modal/SET_SAVEAS_MODAL_VISIBLE",_="modal/SET_EXAMPLE_MODAL_VISIBLE",x="modal/SET_FEEDBACK_MODAL_VISIBLE",T="modal/SET_CLOUD_KEY_MODAL_VISIBLE",I="modal/SET_PUBLISHTO_MODAL_VISIBLE",M="modal/SET_BLOCK_HELPER_VISIBLE",C="editor/OPEN_COSTUME_EDITOR",S="editor/OPEN_SOUND_EDITOR",O="editor/CLOSE_ASSET_EDITOR",N="stage/SET_STAGE_SIZE",D="stage/SET_STAGE_FULL_SCREEN",A="project/GET_PROJECTS",j="project/RENAME_PROJECT",P="project/UPDATE_PROJECTS",L="project/DELETE_PROJECT",z="project/INIT_PROJECT_INFO",Z="project/UPDATE_PROJECT_INFO",U="project/SET_SAVE_PROGRESS",B="project/SET_SAVE_STATUS",R="project/SET_LOADING_PAGE",F="project/SET_PLATFORM_TYPE",q="project/SET_SELF_PROJECT",H="connect/SET_SCAN_STATUS",Y="connect/DISCOVERY_DEVICE",V="connect/CONNECT_DEVICE",$="connect/SET_SHOULD_UPDATE_FIRMWARE",K="connect/DISCONNECT_DEVICE",G="connect/SET_ERR_DISCONNECT_TARGET_ID",Q="PASSPORT_VISIBLE",W="PASSPORT_STATE",J="color-picker/ACTIVATE_COLOR_PICKER",X="color-picker/DEACTIVATE_COLOR_PICKER",ee="color-picker/SET_COLOR_PICKER_CALLBACK",te="firmware/set_visible",ne="firmware/set_upload",oe="firmware/set_upload_percent",ce="firmware/reset",re="uploadcode/set_visible",se="uploadcode/set_percent",ie="uploadcode_set_logs",ae="uploadcode_reset"},20743:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var o=n(96486),c=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};class r{static get instance(){return r._instance||(r._instance=new r),r._instance}format(e){return"["===e[0]?JSON.parse(e):e}download(e){return c(this,void 0,void 0,(function*(){const t=yield fetch(e);return yield t.arrayBuffer()}))}parse(e){return c(this,void 0,void 0,(function*(){const t=this.format(e);if("string"==typeof t)return this.download(t);const n=[];if(Array.isArray(t)){for(const e of t)if((0,o.isPlainObject)(e)&&e.url){const{type:t,version:o}=e,c=yield this.download(e.url);n.push({type:t,data:c,version:o})}return n}}))}getUrlFromFirmware(e){return(0,o.isPlainObject)(e)?"string"==typeof e.url?e.url:"string"==typeof e.url.url?e.url.url:"":""}getOptions(e,t){return e.map((e=>{const[n,o]=e.name.split("."),c=this.getUrlFromFirmware(e);if(!e.modules)return{label:`${t(o,n)}(${e.version||"-"})`,value:c};const r=[];r.push({type:"",url:c,version:e.version});for(const t of e.modules)r.push({type:t.type,url:t.url.url,version:t.version});const s=JSON.stringify(r);return{label:`${t(o,n)}(${e.version||"-"})`,value:s}}))}}var s=n(85413),i=n(84024),a=n(88478),l=n(98243),d=n(48086),f=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};const u=r.instance;let h=null;const m={upload:e=>t=>f(void 0,void 0,void 0,(function*(){t({type:a.N9,isUploading:!0});const n=yield u.parse(e);(0,o.isFunction)(h)&&(yield h());const c=s.aN.instance;yield c.doUpload(n,(e=>{t({type:a.TE,uploadPercent:e})}),(e=>{})),t({type:a.N9,isUploading:!1})})),open:(e,t)=>(h=t,(t,n)=>{const{ports:o}=n().connect;if(Object.keys(o).find((e=>{var t;return null===(t=o[e])||void 0===t?void 0:t.some((e=>{var t;return null===(t=null==e?void 0:e.targetIds)||void 0===t?void 0:t.includes(l.Z.vmCtx.target.id)}))}))!==i.Z.CONNECT_TYPE.SERIAL)return void d.ZP.warning(l.Z.fmtMsg("CONNECT.FIRMWARE.BLE.WARN"));const c=u.getOptions(e.firmware,l.Z.fmtMsg.bind(l.Z));t({type:a.PS,isVisible:!0,list:c})}),close:()=>e=>{e({type:a.PS,isVisible:!1,list:[]})},reset:()=>e=>{e({type:a.kq,isUploading:!1,uploadPercent:0})}}},11379:(e,t,n)=>{"use strict";n.d(t,{i:()=>s,Z:()=>i});var o=n(14890),c=n(28216),r=n(53894);const s=c.useSelector,i=()=>Promise.all([n.e(951),n.e(965)]).then(n.bind(n,17847)).then((e=>{const t=(0,o.combineReducers)(e.default);let n=o.compose;const c=(0,o.createStore)(t,n((0,o.applyMiddleware)(r.default)));return window.mstore=c,c}))},82669:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i,U3:()=>r});var o=n(17187),c=n.n(o);const r={stage:{turboModeChanged:"stage.turboModeChanged"},device:{connect:"device.connect",mode:"device.mode",connected:"device.connected",disconnected:"device.disconnected"},user:{login:"user.login",logout:"user.logout"},workspace:{updateUndoRedoStatus:"workspace.updateUndoRedoStatus"}};var s=n(34155);c().EventEmitter.prototype.off=c().EventEmitter.prototype.removeListener;const i=new(c().EventEmitter);i.setMaxListeners(30);s.env.PRODUCTION||(window.Emitter=i)},22019:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var o=n(29595),c=n(60768),r=n(33372);const s=r.Z.domain.extservice,i=(e,t="latest",n,r)=>{const i={ap:e,v:t,t:n,ids:((r=Object.assign({ids:[],target:"",searchText:"",pageNumber:1,category:""},r)).ids||[]).join(","),target:r.target,s:r.searchText,pageNumber:r.pageNumber.toString(),category:r.category},a=new URLSearchParams(i);return o.Z.get(s,`api/publish/ext/list?${a.toString()}`,void 0,{utoken:c.Z.token})},a=()=>o.Z.get(s,"api/ext-category/list"),l=(e,t,n)=>o.Z.post(r.Z.domain.ext,`ext/list?pageNumber=${e}&pageSize=${t}`,n,{utoken:c.Z.token});var d=n(66675),f=n(96486),u=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};let h=[],m=[];const p=()=>u(void 0,void 0,void 0,(function*(){if(m.length||h.length)return{userDevices:h,userExts:m};let e;m=[],h=[];try{e=yield l(1,1e3,{output:["id","cover","icon","device","name","platform","identify","targets","version","codeTypes","description","main","extApiVersion","homepage","coverURL","fromScratch3","extraInfo"]})}catch(e){}return e&&e.list&&e.list.forEach((e=>{e.originId=e.id,e.id=e.identify,e.iconURL=(0,f.isPlainObject)(e.icon)?e.icon.url:"",e.coverURL=(0,f.isPlainObject)(e.cover)?e.cover.url:e.iconURL,e.userCustom=!0,e.device?h.push(e):m.push(e)})),{userDevices:h,userExts:m}})),g=e=>u(void 0,void 0,void 0,(function*(){const t=(d.ZP.getUrlParams()||{}).extId||"";if(!t)return;const{userDevices:n,userExts:o}=yield p(),c=n.find((e=>e.originId===t))||o.find((e=>e.originId===t));if(!c)return;let r=[];if(!c.device){let t=c.targets;if("string"==typeof t&&(t=[t]),Array.isArray(t)){const o=[];if(t.forEach((e=>{let t="";if("string"==typeof e?t=e:e&&e.name&&(t=e.name),t){const e=n.find((e=>(e.identify||e.id||"").toUpperCase()===t.toUpperCase()));e&&e.main?(e.id=e.identify,r.push(e)):o.push(t)}})),o.length){const t=yield e(o);(0,f.isArray)(t)&&(r=r.concat(t))}}}return r.push(c),r}));var b=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};let k=null;k=new class{constructor(){this.devices=[],this.exts=[],this.queryCached={},this.maxCached=30}getQueryId(e,t){const n=new URLSearchParams(`type=${e}`);for(const e in t){const o=t[e];n.set(e,o)}return n.toString()}requestRemote(e,t){return i("mblockweb","beta",e,t)}isExisted(e,t){return e.find((e=>e.id.toLowerCase()===t.id.toLowerCase()))}getRequestResult(e,t){return b(this,void 0,void 0,(function*(){let n,o;if(t){const c=this.getQueryId(e,t);if(!this.queryCached[c]){o=yield this.requestRemote(e,t);const n=Object.keys(this.queryCached);n.length===this.maxCached&&delete this.queryCached[n[0]],this.queryCached[c]=o}n=this.queryCached[c]}else n=o=yield this.requestRemote(e,t);return o&&o.list.forEach((e=>{const t=e.device;t&&!this.isExisted(this.devices,e)&&this.devices.push(e),t||this.isExisted(this.exts,e)||this.exts.push(e)})),n}))}fetchDevices(e){return this.getRequestResult("device",e)}fetchExts(e){return this.getRequestResult("ext",e)}fetchUserExts(){return m.length||h.length?{userDevices:h,userExts:m}:p()}extTags(){return a()}fetchUrlPreviewExt(){return g(this.fetchByIds.bind(this))}getExt(e){let t;const n=t=>t.id.toLowerCase()===e.toLowerCase();return t||(t=this.devices.find(n)||this.exts.find(n)),t}fetchByIds(e){return b(this,void 0,void 0,(function*(){const t=[],n=[];if(e.forEach((e=>{const o=this.getExt(e);o?t.push(o):n.push(e)})),n.length){const e=yield this.requestRemote("",{ids:n});e&&e.list&&e.list.forEach((e=>{e&&(e.device?this.devices.push(e):this.exts.push(e),t.push(e))}))}return t}))}};const w=k},58038:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var o=n(12754),c=n(84024),r=n(86809),s=n.n(r),i=n(96486);const a=3e5,l=function(e,t){false};const d=class{constructor(e){this.client=s()(e,{reconnectionDelay:1e3,reconnectionAttempts:120}),this.channelMessageHandleMap=new Map,this.channelMessageTimeHandleMap=new Map,this.messageId=0,this.connectEmitFunc=null,this.disconnectEmitFunc=null,this.dataEmitFunc=null,this.checkMlinkFunc=null,this.isConnected=!1,this.isSocketLinked=!1,this.listenerVecter(),setInterval((()=>{this.cleanDirtyData()}),a),this.preSocketId=null,this.sendMessage=(0,i.throttle)(this.sendMessage.bind(this),5)}establishChannel(){return new Promise(((e,t)=>{const n=()=>{c(),e(this.client)},o=e=>{c(),t(e)},c=()=>{this.client.off("connect",n),this.client.off("connect_error",o)};this.checkMlinkVersion(),this.client.on("connect",n),this.client.on("connect_error",o),this.client.open()}))}get socketConnected(){return this.client&&this.client.connected}checkMlinkVersion(){this.client.emit("check_mlink_version")}close(){this.client&&this.client.close(),this.isSocketLinked=!1}listenerVecter(){this.client.on("s2c_send",((e,t)=>{const n=`${t.connectType}.${t.method}.${e}`;l();const o=this.channelMessageHandleMap.get(n);(0,i.isFunction)(o)&&o(t.error,t.data),this.channelMessageHandleMap.has(n)&&(this.channelMessageTimeHandleMap.delete(n),this.channelMessageHandleMap.delete(n))})),this.client.on("connect",(()=>{this.isConnected=!0,this.initializationMessageChannelData(),(0,i.isFunction)(this.connectEmitFunc)&&this.connectEmitFunc("socket.io-client connected."),l()})),this.client.on("disconnect",(()=>{this.isConnected=!1,this.initializationMessageChannelData(),(0,i.isFunction)(this.disconnectEmitFunc)&&this.disconnectEmitFunc("socket.io-client disconnect."),l()})),this.client.on("s2c_receive",(e=>{(0,i.isFunction)(this.dataEmitFunc)&&this.dataEmitFunc(e)})),this.client.on("mlink_version",(e=>{(0,i.isFunction)(this.checkMlinkFunc)&&this.checkMlinkFunc(e)}))}on(e,t){this.client.on(e,((...e)=>{t&&t(...e)}))}emit(e,t){const n=this.getMessageId();this.client.emit(e,n,t)}initializationMessageChannelData(){this.messageId=0,this.channelMessageHandleMap.clear(),this.channelMessageTimeHandleMap.clear()}cleanDirtyData(){this.channelMessageTimeHandleMap.forEach(((e,t)=>{const n=(new Date).getTime()-(e||0);if(a<=n){const e=this.channelMessageHandleMap.get(t);(0,i.isFunction)(e)&&e("æ¶ˆæ¯["+t+"]å‘é€ï¼šç¡¬ä»¶æœªå“åº”",{type:"",data:[]}),this.channelMessageTimeHandleMap.delete(t),this.channelMessageHandleMap.delete(t)}}))}getMessageId(){this.messageId+=1,this.messageId>=2147483646&&(this.messageId=0);return`${this._getRandomString(8)}.${this.messageId}`}_getRandomString(e){e=e||32;const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length;let o="";for(let c=0;c<e;c++)o+=t.charAt(Math.floor(Math.random()*n));return o}sendMessage(e,t){const n=this.getMessageId(),o=`${e.connectType}.${e.cmd}.${n}`;this.channelMessageHandleMap.set(o,t),this.channelMessageTimeHandleMap.set(o,(new Date).getTime()),this.client.emit("c2s_send",n,e),l()}addConnectListener(e){this.connectEmitFunc=e}addDisconnectListener(e){this.disconnectEmitFunc=e}addDataListener(e){this.dataEmitFunc=e}addCheckMlinkListener(e){this.checkMlinkFunc=e}};var f=n(98243),u=n(34155);const h=new class{constructor(){this._runtime=null,this.messageHandleMap=new Map,this._isNeedMlinkUpdate=!1,this._useMlinkVersion=""}get runtime(){if(this._runtime)return this._runtime}connectSocket(e="http://127.0.0.1:55278"){return this._runtime&&this._runtime.close(),this._runtime=new d(e),this._runtime.addDataListener((e=>{const{connectName:t}=e;let n=e.connectType,r=Object.assign(Object.assign({},e),{comName:t});if(n===c.Z.CONNECT_TYPE.HID){n=c.Z.CONNECT_TYPE["24G"];const t=f.Z.vmCtx.target.id,o=f.Z.PortManager.getPortByTargetId(t);r=Object.assign(Object.assign({},e),{comName:o.comName,productId:o.productId,vendorId:o.vendorId})}const s=`${n}.${o.Z[n].connect.getDeviceId(r)}}`,i=this.messageHandleMap.get(`${s}.${e.method}`);"function"==typeof i&&i(e)})),this._runtime.addCheckMlinkListener((e=>{const t=u.env.MLINK_VERSION||"";this._useMlinkVersion=e,this._isNeedMlinkUpdate=((e,t)=>{const n=e=>e.replace(/\./g,"");e=n(e),t=n(t);const o=Math.max(Number(e),Number(t));let c=0;for(let n=0;n<o;n++){if(isNaN(Number(e.charAt(n)))){c=-1;break}if(isNaN(Number(t.charAt(n)))){c=1;break}if(Number(e.charAt(n))>Number(t.charAt(n))){c=1;break}if(Number(e.charAt(n))<Number(t.charAt(n))){c=-1;break}}return c})(e,t)<0})),this._runtime.establishChannel()}getUseMlinkVersion(){return this._useMlinkVersion}get isNeedMlinkUpdate(){return this._isNeedMlinkUpdate}createListeners(e,t,n){this.messageHandleMap.set(`${e}.${t}`,n)}destroyListeners(e,t){this.messageHandleMap.has(`${e}.${t}`)&&this.messageHandleMap.delete(`${e}.${t}`)}sendMessage(e,t){this.runtime.sendMessage(e,t)}addConnectListener(e){this.runtime.addConnectListener(e)}addDisconnectListener(e){this.runtime.addDisconnectListener(e)}}},12754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(84024),c=n(33372);const r={[o.Z.CONNECT_TYPE.SERIAL]:{key:o.Z.CONNECT_TYPE.SERIAL,tabTitle:"CONNECT.SERIAL",devicePane:{svg:"connected-serial"},connectModal:{svg:"connect-usb-tip"},connect:{timeout:5e3,getDeviceId:e=>e.comName}},[o.Z.CONNECT_TYPE.BLE]:{key:o.Z.CONNECT_TYPE.BLE,tabTitle:"CONNECT.BLE",devicePane:{svg:"connected-ble"},connectModal:{svg:"connect-ble-tip",link:c.Z.link.ble_help,helpText:{id:"CONNECT.BLE.HELP",defaultMessage:"æ£€æµ‹ä¸åˆ°æˆ‘çš„è“ç‰™è®¾å¤‡ï¼Ÿ"}},connect:{timeout:8e3,getDeviceId:e=>e.comName}},[o.Z.CONNECT_TYPE.HID]:{key:o.Z.CONNECT_TYPE.HID,tabTitle:"CONNECT.HID",devicePane:{svg:"connected-serial"},connectModal:{svg:"connect-hid-tip"},connect:{timeout:5e3,getDeviceId:e=>`${e.vendorId}_${e.productId}_${e.comName}`}},[o.Z.CONNECT_TYPE["24G"]]:{key:o.Z.CONNECT_TYPE["24G"],tabTitle:"CONNECT.HID",devicePane:{svg:"connected-24g"},connectModal:{svg:"connect-hid-tip"},connect:{timeout:5e3,getDeviceId:e=>`${e.vendorId}_${e.productId}_${e.comName}`}},[o.Z.CONNECT_TYPE.WIFI]:{key:o.Z.CONNECT_TYPE.WIFI,tabTitle:"CONNECT.WIFI",devicePane:{svg:"connected-wifi"},connectModal:{svg:"connect-wifi-tip"},connect:{timeout:5e3,getDeviceId:e=>e.ssid}}}},29595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(9669),c=n.n(o),r=n(97770),s=n(66675),i=n(96486);const a=c().create(),l={"content-type":"application/json; charset=utf-8"};c().defaults.timeout=1e4,c().defaults.headers=l;const d=[];window.recordList=d;const f=e=>{const{data:t}=e;if((0,i.isPlainObject)(t)&&(0,i.has)(t,"code")){switch(t.code){case 20002:case 30001:case 40001:return Promise.reject(t)}return t.data}return t},u=e=>Promise.reject(e);a.interceptors.request.use((e=>(Object.assign(e.headers,{lang:"",accesstoken:"",utoken:r.ZP.token,token:r.ZP.token}),(e=>{for(let t=0;t<d.length;t++)if(d[t].umet===e.url+"&"+e.method){d[t].cancel("å–æ¶ˆè¯·æ±‚"),d.splice(t,1);break}})(e),e.cancelToken=new(c().CancelToken)((t=>{d.push({umet:e.url+"&"+e.method,cancel:t})})),e)),u),c().interceptors.response.use(f,u),a.interceptors.response.use(f,u);const h=(e,t)=>("object"==typeof e&&(e=s.ZP.envUtils.isInternational?e.en:e.zh),e+t),m=e=>{c().defaults.headers=Object.assign(Object.assign({},l),e)},p={get:(e,t,n,o)=>{const r=h(e,t);return o&&m(o),c().get(r,n)},post:(e,t,n,o)=>{const c=h(e,t);return o&&m(o),a.post(c,n)},getFile:e=>c().get(s.ZP.safeHttps(e),{responseType:"arraybuffer",headers:{"Cache-Control":"no-cache"},timeout:1e5}),baseGet:e=>c().get(s.ZP.safeHttps(e))}},85413:(e,t,n)=>{"use strict";n.d(t,{o:()=>be,aN:()=>ge,Qm:()=>pe});var o=n(98243),c=n(96486),r=n(86809),s=n.n(r),i=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};let a;a=function(e,t,n,o){return i(this,void 0,void 0,(function*(){let n=null,c=e.options;o=o||"//arduinoserver.makeblock.com",c||(c={});const r=e=>{t(e)};yield new Promise(((e,t)=>{n=s().connect(o),n.on("disconnect",(()=>{r("Arduino server disconnected."),t("disconnected")})),n.on("connect",(()=>{r("Arduino server connected."),e()})),setTimeout((()=>{t("Connect arduino server timeout")}),5e3)}));const i=yield new Promise(((t,o)=>{n.emit("compileReq",c,e.code),n.on("compileRsp",(e=>{e?(r("Arduino compile finish."),t(e)):o("Arduino compile fail")})),r("Arduino compile..."),n.on("log",(e=>{r(e)})),setTimeout((()=>{o("compile timeout")}),2e4)}));return n.disconnect(!0),n=null,e.code="string"==typeof i?i:"",e}))};const l={name:"arduino",process:a};var d=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};const f=e=>{const t=[],n=[],o=e.split("");for(let e=0,t=o.length;e<t;e+=8)n.push(o.slice(e,e+8));for(const e of n){const n=e.join("");let o=parseInt(n,2).toString(16);parseInt(n,2)<16&&(o=`0${o}`),t.push(o)}return t.join("")};const u={process:function(e,t,n){return d(this,void 0,void 0,(function*(){return e.code=(e=>{const t=e.match(/codey\.face(?:_at)?\(([\s\S]*?)\)/g);if(!t)return e;for(let n=0;n<t.length;n++){const o=t[n].split(",")[0].replace(/codey.face(?:_at)?\(/,"").replace(")","");if("'"===o.charAt(0)||'"'===o.charAt(0)||o.length>200){const t=o.trim().split("'").join("").replace(/\s/g,"");let n=t;if(t.length>34){const e=[];let o=0;for(;o<16;){e[o]="";let n=0;for(;n<8;)e[o]+=t[16*n+o],n++;o++}n="'"+f(e.join(""))+"'"}32===t.length&&(n="'"+t+"'"),e=e.replace(o,n)}}return e})(e.code),e}))},name:"codey"},h={[l.name]:l.process,[u.name]:u.process};var m=n(62810),p=n(94107),g=n.n(p),b=n(66675),k=n(48764).Buffer;const w=n(95270),v=n(80375);class y extends(g()){constructor(e){super(e),this.progress=-1,this.baseProgress=-1,this.length=-1}bootload(e,t,n,o,c){this.progressHandle=o,this.length=-1,this.progress=-1,this.baseProgress=-1,super.bootload.call(this,e,t,n,c)}loadAddress(e,t,n,o){const c=this.baseProgress+Math.round(100*t/this.length);this.progress!==c&&(this.progress=c,this.progressHandle&&setTimeout((()=>{this.progressHandle&&this.progressHandle(c)}),0)),super.loadAddress.call(this,e,t,n,o)}upload(e,t,n,o,c){this.baseProgress=0,this.length=t.length,super.upload.call(this,e,t,n,o,c)}verify(e,t,n,o,c){this.baseProgress=50,this.length=t.length,super.verify.call(this,e,t,n,o,c)}verifyPage(e,t,n,o,c){const r=k.concat([k.from([v.Resp_STK_INSYNC]),t,k.from([v.Resp_STK_OK])]),s=t.length>=n?n:t.length,i={cmd:[v.Cmnd_STK_READ_PAGE,s>>8&255,255&s,70],responseLength:r.length,timeout:o};w(e,i,((e,t)=>{c(e,t)}))}}const E=function(e,t,n,o){const c=new y({quiet:!1});if(!e)return void o("serial port not set");const r=b.ZP.createPromiseFunc(e.set.bind(e)),s=b.ZP.createPromiseFunc(c.bootload.bind(c));setTimeout((()=>{const c=r({rts:!1,dtr:!1});r({rts:!0,dtr:!0}).then((()=>b.ZP.delay(50))).then((()=>c)).then((()=>b.ZP.delay(50))).then((function(){return r({rts:!0,dtr:!0})})).then((()=>b.ZP.delay(50))).then((()=>m.parse(t).data)).then((function(t){const o={signature:k.from([30,149,15]),pageSize:128,timeout:1e3};return s(e,t,o,n)})).then((function(){return c})).then((()=>{o(null,!0)})).catch((e=>{e&&(e.message.indexOf("3020")>-1||e.message.indexOf("timeout")),o(e,null)}))}),600)};var _=n(54777),x=n.n(_);class T extends(x()){constructor(e){super(e),this.length=-1,this.progress=-1,this.baseProgress=-1}sync(e,t,n){this.progressHandle=t,this.length=-1,this.progress=-1,this.baseProgress=-1,super.sync.call(this,e,n)}loadAddress(e,t){const n=e<<1,o=this.baseProgress+Math.round(100*n/this.length);this.progress!==o&&(this.progress=o,this.progressHandle&&setTimeout((()=>{this.progressHandle&&this.progressHandle(o)}),0)),super.loadAddress.call(this,e,(function(e,n){t(e,n)}))}upload(e,t,n){this.baseProgress=0,this.length=e.length,super.upload.call(this,e,t,n)}}const I=function(e,t,n,o){const c={timeout:200,stabDelay:100,cmdexeDelay:25,synchLoops:32,byteDelay:0,pollValue:83,pollIndex:3},r=new T(e),s=b.ZP.createPromiseFunc(e.set.bind(e)),i=b.ZP.createPromiseFunc(r.sync.bind(r)),a=b.ZP.createPromiseFunc(r.enterProgrammingMode.bind(r)),l=b.ZP.createPromiseFunc(r.upload.bind(r)),d=b.ZP.createPromiseFunc(r.exitProgrammingMode.bind(r));setTimeout((()=>{const e=m.parse(t).data,r=s({rts:!1,dtr:!1});s({rts:!0,dtr:!0}).then((()=>b.ZP.delay(10))).then((()=>r)).then((()=>b.ZP.delay(10))).then((()=>s({rts:!0,dtr:!0}))).then((()=>b.ZP.delay(10))).then((()=>i(5,n))).then((()=>b.ZP.delay(1))).then((()=>a(c))).then((()=>b.ZP.delay(1))).then((()=>l(e,256))).then((function(){return d()})).then((()=>r)).then((()=>{o(null,true)})).catch((e=>{o(e,null)}))}),600)};const M=class{static info(...e){}static debug(...e){}static warn(...e){}static error(...e){}};var C=n(48764).Buffer,S={},O=function(e){return(e+"").charCodeAt(0)};let N=0;S.Flasher=function(e,t){var n=this;this.options=t||{},this.sp=e,this.signature=this.options.signature||"LUFACDC",this.options.debug&&this.sp.on("data",(function(e){for(var t=0;t<e.length;t++){var n=e.toString().substring(t,t+1);(n.charCodeAt(0)<32||n.charCodeAt(0)>126)&&(n=".")}})),this.c=function(e,t,o){return n.cmds.push({value:e,callback:function(e){t&&t(e)},expectedResponseLength:o}),this},this.flashChunkSize=0,this.bytes=[],this.cmds=[]},S.Flasher.prototype={run:function(e){var t=this;setTimeout((function(){if(!t.running){var n=t.cmds.shift();if(n){N=setTimeout((function(){clearTimeout(N),t.sp.emit("error","time out")}),2e3),t.running=!0,t.options.debug;var o=C.alloc(0),c=function(r){clearTimeout(N),r&&(o=C.concat([o,r])),(void 0===n.expectedResponseLength||n.expectedResponseLength<=o.length)&&(t.sp.removeListener("data",c),t.running=!1,n.callback(o),setTimeout((function(){t.cmds.length>0?t.run(e):e&&e()}),0))};t.sp.on("data",c),t.sp.write(n.value),t.progressHandle&&t.progressHandle(Math.round((t.progressTotalLength-t.cmds.length)/t.progressTotalLength*100))}}}),0)},prepare:function(e){var t=this;this.c("S",(function(n){n.toString()!==t.signature&&e(new Error("Invalid device signature; expecting: "+t.signature+" received: "+n.toString()))})).c("V").c("v").c("p").c("a").c("b",(function(n){"Y"!==(n.toString()||"X")[0]&&e(new Error("Buffered memory access not supported.")),t.flashChunkSize=n.readUInt16BE(1)})).c("t").c("TD").c("P").c("s"),this.run((function(){e(null,t)}))},erase:function(e){e&&e()},program:function(e,t,n){var o,c=this,r=[];this.totalBytes=0,this.c([O("A"),0,0],(function(){c.progressHandle=t,o=m.parse(e),c.totalBytes=o.data.length,Array.prototype.push.apply(r,o.data),c.allBytes=r,c.options.debug,c.chunksSent=[];for(var n=0;n<r.length;n+=c.flashChunkSize){var s=Array.prototype.slice.call(o.data.slice(n,n+c.flashChunkSize));c.chunksSent.push(s),c.c([O("B"),s.length>>8&255,255&s.length,O("F")].concat(s))}c.progressTotalLength=c.cmds.length})),this.run((function(){c.progressHandle=null,n&&n()}))},verify:function(e){this.c("L").c("E"),this.run((function(){e()}))}},S.init=function(e,t,n){"function"!=typeof t||n||(n=t,t={}),new S.Flasher(e,t).prepare(n)};const D=S;var A=n(48764).Buffer,j=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};const P="reset_port",L="bootload_port",z=function(e,t,n){return j(this,void 0,void 0,(function*(){const o="serialport",{options:c}=t,{connectService:r}=e,s=yield U(r,o,c),{baudRate:i}=null==c?void 0:c.connect[o];if(s[0]===P){const a={comName:s[1].comName,baudRate:1200,deviceId:t.deviceId,name:t.name,id:t.id};e.setIgnoreError("close",!0),e.close((s=>j(this,void 0,void 0,(function*(){s&&M.debug("å…³é—­é”™è¯¯ï¼š",s),yield new Promise((e=>{setTimeout(e,500)}));let l=!1;r.connect(o,a,((s,a)=>{if(l)return;if(l=!0,s)return void n(s,null);e.setIgnoreError("close",!1),(e=a.rawPort).on("error",(e=>{}));const d=b.ZP.createPromiseFunc(e.set.bind(e));d({rts:!0,dtr:!0}).then((()=>b.ZP.delay(250))).then((function(){return d({rts:!1,dtr:!1})})).then((()=>b.ZP.delay(50))).then((function(){r.disconnect(a.type,a.connectionId)})).then((function(){return new Promise(((e,n)=>{let s=0;const a=setInterval((()=>{if(s++,s>50)return clearInterval(a),void n();r.discovery(o,((n,r)=>{if(n)return;let s=[];const{productId:l}=c.connect[o];l&&(s=l.split(",").map((e=>parseInt(e,16))));const d=r.filter((function(e){return s[1]===parseInt(e.productId,16)}));if(d.length){clearInterval(a);const n={comName:d[0].comName,baudRate:parseInt(i),deviceId:t.deviceId,name:t.name,id:t.id};e(n)}}))}),100)}))})).then((e=>j(this,void 0,void 0,(function*(){try{const t=yield Z(r,o,e);n(null,t)}catch(e){n(e)}})))).catch((e=>{n(e,null)}))}))}))))}else if(s[0]===L){const c={comName:s[1].comName,baudRate:parseInt(i),deviceId:t.deviceId,name:t.name,id:t.id};e.setIgnoreError("close",!0),e.close((t=>j(this,void 0,void 0,(function*(){t&&M.debug("å…³é—­é”™è¯¯ï¼š",t),yield new Promise((e=>{setTimeout(e,200)})),e.setIgnoreError("close",!1);try{yield Z(r,o,c),n(null)}catch(e){n(e)}}))))}else n(new Error("no serial port"))}))},Z=(e,t,n)=>new Promise(((o,c)=>{e.connect(t,n,((e,t)=>{e?c(e):o(t.rawPort)}))})),U=(e,t,n)=>{let o=[];n.connect[t]&&(o=n.connect[t].productId.split(",").map((e=>parseInt(e,16))));const c=o[0],r=o[1];return new Promise((n=>{e.discovery(t,((e,t)=>{if(!e){for(let e=0;e<t.length;e++){if(c===parseInt(t[e].productId,16))return void n([P,t[e]]);if(r===parseInt(t[e].productId,16))return void n([L,t[e]])}n(["none_port"])}}))}))},B={stk500v1:E,stk500v2:I,avr109:function(e,t,n,o,c={}){e?z(e,c,((e,c)=>{if(e)return void o(e,null);const r=()=>{c.close((e=>{}))},s=b.ZP.createPromiseFunc((function(e,t,o,c){D.init(e,t,(function(e,t){if(e)throw e;t.erase((function(){t.program(o.toString(),n,(function(){t.verify((function(e){if(e)throw e;c()}))}))}))}))}));setTimeout((()=>s(c,{signature:A.from([67,65,84,69,82,73,78]).toString(),debug:!1},t).then((()=>{r(),o(null,!0)})).catch((e=>{e&&(e.message.indexOf("3020")>-1?M.info("board is not match"):e.message.indexOf("timeout")>-1&&M.info("board firmware: timeout")),r(),o(e,null)}))),600)})):M.error("serial port not set")},microbit:function({channel:e},t,n,o){if(!e)return void o("microbit service not available");const c={connectType:"microbit",cmd:"upload",params:{pyScript:t}};n(1),e.sendMessage(c,((e,t)=>{e?o(e):(o(null,t),n(100))}))}},R=(e,t,n,o)=>{if("string"===typeof t)E(e,t,n,o);else if(t instanceof ArrayBuffer){const c=new TextDecoder("utf-8").decode(new Uint8Array(t));E(e,c,n,o)}else o("unsupported image data type")},F=(e,t,n,o)=>{if("string"===typeof t)I(e,t,n,o);else if(t instanceof ArrayBuffer){const c=new TextDecoder("utf-8").decode(new Uint8Array(t));I(e,c,n,o)}else o("unsupported image data type")};var q=n(15861),H=n(48764).Buffer;const Y=n(83072),V=n(55835),$=n(42635),K={BOOTLOADER_FLASH_OFFSET:4096,FLASH_SIZES:{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},STUB_CODE:{data_start:1073736612,data:H.from("08c0fe3f","hex"),text:H.from("f820f43ff830f43f36410091fdffc0200088098080245648ff91faffc0200088098080245648ff1df00000001020f43f0020f43f00000008364100e5fcff81fbff0c02c02000290891faff21faffc02000226900c0200028095672ffc0200088080c128080042028301df0000000004036410065fcff169aff81edff91fcffc020009908c0200098085679ff1df00000000000010000800098c0ff3fffffff000420f43f36410021fcff32220416430565f8ff16ea04a5fbff58420cf80c1341f4ff57a80b5822805510cc3541f2ff1c03882240581125f3ff81f0ff80851051f0ffc02000890581d2ffc02000426800c0200048085674ff884248223088c03a34894239221df0000800f43f1c00f43f0000f43f90c0ff3f0840ff3f8080000084800000404000004880ff3f1000f43f94c0ff3f36410021f4ff31f7ff41f7ffc0200058024a4361f1ffc02000280620207416e209c6230061eeffb1eeffc02000a22600a0a07425a80096ca0491eaff81ebffb1ebff808980b0b980c02000c808921b00a0a0749080f41b989090f4c02000925b008a8cc02000a24800821b0091e1ff8080f497983ec02000a80481e0ff91ddff379a194602007ce8871ae94609000000c020003908c020009904460200c020009908c02000390481d1ff0c098a83c020009258000b22260202c6d9ffc6d4ff0021ceffc0200059021df00000502d064036410041a4ff583430356316e30358145a53505c4186000065e8ff8844a61804882487a5f2e5e0ff169affa81430c32020b22081f2ffe008008c3a22a0c4295458143a55591458343035c039341df0000820f43f0000400070e2fa3f48240640f0220640366100e5d9ffad0181fcffe008003d0a0c12ecea980182a2008089108901a5deff91f2ff81f3ffc02000a809808a20c02000826900b22100a1efff81f0ffe00800a023831df00000ff0f0000364100a178ff91fdff82a001824a00326a01308c41226a033030b49a22892a2a83808c410c02894a295aa5f8ff2d0a32a0c5a023931df0002c92004036410082a0c0ad0287920ea2a0db81fbffe00800a2a0dc86030082a0db87920881f7ffe00800a2a0dd81f4ffe008001df00000003641003a3206020000a202001b22e5fbff3792f41df0000000100000581000007cda0540d82e06409cda05401cdb0540362121a2d11081faffe008008609000051f6ffbd01504363cd04ad0281f6ffe00800ecfacd04bd01a2d11081f3ffe008004a224033c05663fda1ecffb2d1101aaa81eeffe00800a1e9ff1c0b1aaa25f8ff2d031df022a0631df00000364100a2a0c081cdffe008001df0000068100000701000007410000078100000fc670040a49200400868004036412161f9ff81f9ff1a661a88490672d1100c062c0a590862671a81f6ffe0080081cfff47b802463600ad0781cfffe008004d0651efff61cbff1a556a818905062d000081e9ff4063c01a888808bd01606863cd0620a22081c5ffe008008cea91e1ff0c055267166d059a51460d000025f6ff60b620ad01e5ecffa5f5ffcd0610b12070a72081baffe008006a226a4437b4cc81d6ff5064c01a8888088736a306efff000081d4ffe0080081d1ff108880b22800657500f7ea0df6460a60b580a24b001b6606f7ff7cebb79ad7264627a1a5ff70b7201aaa81a7ffe0080065efffa1a0ff1c0b1aaae5e5ffa5eeff2c0a81c3ffe008001df052271a37b5d157b48ec6f2ff1df0000000c0fe3f4f484149a4ebff3f34f109400c00f43f3840f43fffff0000000001008c800000104000000040000000c0fe3f04c0fe3f102700001400f43fffff0f00a4ebff3f08c0fe3fb0c0ff3f7c680040ec670040588600406c2a064038320640cc2c06404c2c064034850040cc90004030ef0540589200404c820040142c064036c10021e0ff0c0a22610842a00081efffe0080021dbff31dcff0601004262004b223732f765e2ff0c4ba2c12025d9ffa5e1ff41e0fe21e0feb1d4ff0c0c2a240c5ac02000490281e2ffe0080031d0ff22a101c0200058032c0a202520c0200029038184ffe0080081dbffe0080021c9ffc020003802ccba1cc220231022c2f80c1320a3830c0b81d4ffe00800f1c2ffd152ffc1c2ffb1a5fee2a1000c0a81cfffe0080031a4fe52d32b41c2fe61bcff6a24c0200068021676ffc0200078020c06c0200069020c122241102207010c2822411182510969512692081c3667121f460800002207036207028022116022206642112827c0200028022951460100001c2222510965d4ff0c8ba2c11025cbff22070382070280221180822021a2ff87b211a2a0c065c6ffa2a0ee25c6ffe5d1ff46ddff6207010cd227960206910067324e666602c6af00f67620663602c66500f64608662602c64b0046ae00664602067b00665602868e0086aa000c92279602068600673208667602c68b0086a500669602c683000cb227960246790046a1001c32279602c6390067322866b602c643001c0267320a0cf2279602062e000699001c12279602864b001c2227960246630046940022a0d127162d67320922a0d0271618c68f000022a0d227960286250022a0d3279602462501468a000c1216183ead022d0a868500268802868300c6f8000000e5afff604620602280162a01867e0000a0ac418172ffe0080056da1e42d4f040a2c0cc2486010100a060f45616fe615aff860300a0a0f5816affe00800569a1c6044c040a2c04736ea860300a0ac418163ffe00800561a1b42d4f040a2c056a4fe46f2000c0622a0c0268802466a0086f200000066b80286f00086460066b80286db00c6600022a00126b802065f009227048144ff62a00022a0c2871902c65d00b857a82765aaffc6d3000000000c1466b82ca847813bff0c0622a0c2871a024655008837b857a82720881189c1e5a7ff2117fe88c1696222d22b8922a046832d048649009112fe0c06a2090022a0c6679a028648006827285982c8f08066c092a0c060299362c7189d06b2a0efc60100a209001b99a0bb3060a9c0872af1820705a20704620706808811a0982000661190862062070792a0c1806601806620608bc08029930c064633000081f9fd0c0692080022a0c6679902c62e00983822a0c8671902062c006248002858062a001c8227980246a3000c060c124626000066480246a70006200066b80206a90046010066480206a9000c0622a0c0061e0066b80246a700061800c1fffe0c06a80c0c1282c8f09d06809293a0269320991022a0c6679952b1f9fe6d09d80b22a0c9873d4580e0140c0622a0c0679e3a62c7182d0ec602002a9698094b22990a4baa0c1920edc08732ed161924a90ce90b868e0000006688028692000c120c06c60100000062a00022a0ff20a074a596ff60a0746596ff25a2ff56a2c76207010cf8871631673815664602065600666602c65b002636024617ff061b00001c2227960206500022a0d227164b1c12271602c610ff461b00a1d2fe81dffee0080061d1fe81d1fec020006806b837808610c08811606435806680b06682b82720a220b0b6c281d5fee00800a2a3e881d2fee008004600ff0000d22705c22704b22703a827259cff86fbfe00b2070322070280bb1120bb20b2cbf0a2c718257dff46f5fe00000062070382070280661180662022c71862c6f00c19861d0041b4fe71b0fde8046971e077c0796178250c3977360292a00199d1e9c16563ff98d171adfee8c1a1acfebd029901f2c118dd07c2c11c81b3fee008009d0ab825a871a0bbc0b925a066c0b804aa22a861aabb0ba9a0a920b904a0af0570bbc0cc9ac2db800c1dc0ad8316aa00ad0799d12574ff98d179048cb678338c77907f319077c09697f7d6890022a0c72953063e000056490f28331612b222a0c8060100000022a0c9295346c4fe00a82756bab08195fee00800a184fe8190fee008008192fee00800c6bcfe683716e6ae20a220818dfee00800a2a3e88188fee00800e0060086b5fe0089c18189fee0080088c1a08293ad084603ff282768376082208080b41608c1c685ffb22703a22702257fff22a0000c16a026934681fff877e867d857c847b837a8270c128171fee008006d0a0c0a602a83067dffa8270c0b816bfee008000c020676ff0028276837c0200069020c062d060675ff2159fe8857682789022157fe690206f6ff9155fe0c08680922a0c86028836d022151fe890989020c126028830666ff0028331622f1468afe1df000003641009d0282a0c0280387990ecc320c12c606000c0229037ce21df0261205262212060c0082a0db8029238799290c22290306080022a0dc2799080c1229032d081df00082a0dd7cf287990b0c12290322a0db1df0007cf21df00000","hex"),text_start:1074393088,entry:1074394468}},G=16384,Q=6144,W=e=>{if(-1<e.indexOf("MB"))return 1024*parseInt(e.substring(0,e.indexOf("MB")))*1024;if(-1<e.indexOf("KB"))return 1024*parseInt(e.substring(0,e.indexOf("KB")));throw new Error("Unknown size "+e)};const J=new class{constructor(){this.init()}init(){this.buf=[],this.temp=[]}write(e){const t=W("8MB");if(this.temp.length>t)throw new Error("ç¼“å†²åŒºå¤§å°è¶…è¿‡å›ºä»¶é™åˆ¶é¢åº¦ã€‚");return e.forEach(((e,t)=>{this.temp.push(e)})),this.slip_write(),!0}read(){let e=[];return this.buf.length>0&&(e=this.buf.shift()),H.from(e)}slip_write(){let e,t=!1,n=null,o=0;for(;0<this.temp.length&&o!==this.temp.length;){if(e=this.temp[o],null===n){if(192!==e){this.temp.splice(0,o+1),o=0;continue}n=[]}else if(t)if(t=!1,220===e)n.push(192);else{if(221!==e){this.temp.splice(0,o+1),o=0;continue}n.push(219)}else if(219===e)t=!0;else{if(192===e){this.temp.splice(0,o+1),o=0,this.buf.push(n),0!==n.length&&(n=null);continue}n.push(e)}o++}}};class X{constructor(e){this.recevie=!1,this.inst=e,this.isOpen=!0,this.inst.on("data",(e=>{this.recevie=!0,J.write(e)})),this.inst.on("disconnect",(()=>{this.isOpen=!1}))}write(e){if(this.recevie=!1,!this.isOpen)throw new Error("serialport is diconnect");J.buf=[],this.inst.write(e,"utf8",(()=>{}))}}class ee{constructor(e,t,n,o,c){this.firmwareDataBuffer=H.from(t),this.progressHandle=n,this.progresscb=o,this._port=e,this.tag=c,this.initEsp()}initEsp(){this.flash_size="8MB",this.addrIdx=4096,this.flash_mode="dio",this.flash_freq="keep",this.compress=!0,this.flashingGo=!1,this.STATUS_BYTES_LENGTH=4,this.IS_STUB=!1,this._port.inst.set({rts:!0,dtr:!0})}pad_to(e,t,n=255){const o=e.length%t;if(0!==o){const c=[];for(let e=0;e<t-o;e++)c.push(n);e=H.concat([e,H.from(c)])}return e}_update_image_flash_params(e,t,n){if(n.length<8)return n;let[o,,c,r]=new Y("BBBB").unpack(n.slice(0,4));if(e!==K.BOOTLOADER_FLASH_OFFSET||233!==o)return n;"keep"!==t.flash_mode&&(c={qio:0,qout:1,dio:2,dout:3}[t.flash_mode]);let s=15&r;"keep"!==t.flash_freq&&(s={"40m":0,"26m":1,"20m":2,"80m":15}[t.flash_freq]);let i=240&r;"keep"!==t.flash_size&&(i=K.FLASH_SIZES[t.flash_size]);const a=new Y("BB").pack(c,i+s);return 0!==a.compare(n.slice(2,4))&&(n=H.concat([n.slice(0,2),a,n.slice(4)])),n}flash_defl_begin(e,t,n){var o=this;return(0,q.Z)((function*(){const c=parseInt((t+G-1)/G),r=parseInt((e+G-1)/G);let s,i;return o.IS_STUB?(s=e,i=3):(s=r*G,i=o.timeout_per_mb(30,s)),yield o.check_command("enter compressed flash mode",16,new Y("<IIII").pack(s,c,G,n),0,i),c}))()}check_command(e,t=null,n=[],o=0,c=3){var r=this;return(0,q.Z)((function*(){const[s,i]=yield r.command(t,n,o,c);if(i.length<r.STATUS_BYTES_LENGTH)throw new Error(`Failed to ${e}. Only got ${i.length} byte status response.`);if("00"!==i.slice(i.length-r.STATUS_BYTES_LENGTH).slice(0,1).toString("hex"))throw new Error(`Failed to ${e}`);return i.length>r.STATUS_BYTES_LENGTH?i.slice(0,i.length-r.STATUS_BYTES_LENGTH):s}))()}read_from_pool(e,t){let n=0;return new Promise((o=>{const c=setInterval((()=>{const r=J.read();if(0===r.length&&n++,10*t<n)return clearInterval(c),void o(!1);try{const[,t,,n]=new Y("<BBHI").unpack(r.slice(0,8)),s=r.slice(8);null!==e&&t!==e||(clearInterval(c),o([n,s]))}catch(e){}}),100)}))}command(e=null,t,n=0,o=3){var c=this;return(0,q.Z)((function*(){if(null!==e){const o=H.concat([new Y("<BBHI").pack(0,e,t.length,n),t]);yield c.write(o)}const r=yield c.read_from_pool(e,o);if(!1!==r)return r;throw new Error("Response doesn't match request")}))()}write(e){var t=this;return(0,q.Z)((function*(){const n=[192];return e.forEach(((e,t)=>{219===e?(n.push(219),n.push(221)):192===e?(n.push(219),n.push(220)):n.push(e)})),n.push(192),yield t._port.inst.drain(),t._port.write(n),new Promise((e=>{const n=(new Date).getTime(),o=setInterval((()=>{(t._port.recevie||2e3<(new Date).getTime()-n)&&(clearInterval(o),e())}),100)}))}))()}timeout_per_mb(e,t){const n=e*(t/1e6);return n<3?3:n}checksum(e,t=239){return e.forEach(((e,n)=>{t^="number"==typeof e?e:e.charCodeAt()})),t}flash_defl_block(e,t,n=3){var o=this;return(0,q.Z)((function*(){yield o.check_command(`write compressed data to flash after seq ${t}`,17,H.concat([new Y("<IIII").pack(e.length,t,0,0),e]),o.checksum(e),n)}))()}flash_md5sum(e,t){var n=this;return(0,q.Z)((function*(){const o=n.timeout_per_mb(8,t),c=yield n.check_command("calculate md5sum",19,new Y("<IIII").pack(e,t,0,0),0,o);if(32===c.length)return c.toString("utf8");if(16===c.length)return c.toString("hex").toLowerCase();throw new Error(`MD5Sum command returned unexpected result: ${c.toString()}`)}))()}flash_defl_finish(e=!1){var t=this;return(0,q.Z)((function*(){const n=new Y("<I").pack(Number(!e));yield t.check_command("leave compressed flash mode",18,n)}))()}flash_begin(e,t){var n=this;return(0,q.Z)((function*(){const o=parseInt((e+G-1)/G),c=n.get_erase_size(t,e);yield n.check_command("enter Flash download mode",2,new Y("<IIII").pack(c,o,G,t),0,3)}))()}get_erase_size(e,t){return t}mem_begin(e,t,n,o){var c=this;return(0,q.Z)((function*(){return yield c.check_command("enter RAM download mode",5,new Y("<IIII").pack(e,t,n,o))}))()}mem_block(e,t){var n=this;return(0,q.Z)((function*(){return yield n.check_command("write to target RAM",7,H.concat([new Y("<IIII").pack(e.length,t,0,0),e]),n.checksum(e))}))()}mem_finish(e=0){var t=this;return(0,q.Z)((function*(){const n=new Y("<II").pack(Number(0===e),e);try{return yield t.check_command("leave RAM download mode",6,n,0,3)}catch(e){if(t.IS_STUB)throw e;return}}))()}run_stub(){var e=this;return(0,q.Z)((function*(){const t=K.STUB_CODE;for(const n of["text","data"])if(t[n]){const o=t[n+"_start"],c=t[n].length,r=parseInt((c+Q-1)/Q);yield e.mem_begin(c,r,Q,o);for(let o=0;o<r;o++){const c=o*Q;let r=c+Q;r=r>t[n].length?t[n].length:r,yield e.mem_block(t[n].slice(c,r),o)}}yield e.mem_finish(t.entry);const n=J.read();if("OHAI"!==n.toString())throw new Error(`Failed to start stub. Unexpected response: ${n.toString()}`);return e.IS_STUB=!0}))()}_connect_attempt(e="default_reset_connect_attempt",t=!1){var n=this;return(0,q.Z)((function*(){if(!n._port.isOpen)throw new Error("serialport is diconnect");let o=null;if("no_reset_no_sync"===e)return o;"no_reset"!==e&&(n._port.inst.set({dtr:!1,rts:!0}),yield n.sleep(.1),t&&(yield n.sleep(1.2)),n._port.inst.set({dtr:!0,rts:!1}),t&&(yield n.sleep(.4)),yield n.sleep(.05),n._port.inst.set({dtr:!1,rts:!1}));for(let e=0;e<5;e++)try{return yield n._port.inst.drain(),yield n.sync(),null}catch(e){yield n.sleep(.05),o=e}return o}))()}sync(){var e=this;return(0,q.Z)((function*(){const t=[7,7,18,32];for(let e=0;e<32;e++)t.push(85);const n=H.from(t);yield e.command(8,n,0,.1);for(let t=0;t<7;t++)yield e.command()}))()}sleep(e){return new Promise((t=>{setTimeout((()=>{t()}),1e3*e)}))}connect(e="default_reset"){var t=this;return(0,q.Z)((function*(){let n;try{for(let o=0;o<7;o++){if(n=yield t._connect_attempt(e,!1),null===n)return;if(n=yield t._connect_attempt(e,!0),null===n)return}}catch(e){}throw new Error("Failed to Boot.")}))()}hard_reset(){var e=this;return(0,q.Z)((function*(){e._port.inst.set({rts:!0,dtr:!1}),yield e.sleep(.1),e._port.inst.set({rts:!1,dtr:!1})}))()}write_flash(){var e=this;return(0,q.Z)((function*(){const t={};t.flash_size=e.flash_size,t.flash_mode=e.flash_mode,t.flash_freq=e.flash_freq,t.compress=e.compress,yield e.connect("default_reset");const n=W(t.flash_size),o=parseInt(e.addrIdx,10);if(n<o+e.firmwareDataBuffer.length)throw new Error(`Firmware (length ${e.firmwareDataBuffer.length}) at offset ${o} will not fit in ${n} bytes of flash. Use --flash-size argument, or change flashing address.`);let c=e.pad_to(e.firmwareDataBuffer,4);c=e._update_image_flash_params(o,t,c);const r=V.createHash("md5").update(c).digest("hex"),s=c.length;yield e.run_stub(),e.flashingGo=!0;const i=c;c=$.deflateSync(i,{level:9});const a=s/c.length;e.STATUS_BYTES_LENGTH=2;const l=yield e.flash_defl_begin(s,c.length,o);let d,f=0,u=0,h=(new Date).getTime();for(;c.length>0;)u=parseInt(100*(f+1)/l),u<100&&e.progressHandle(e.tag,e.progresscb,u),d=c.slice(0,G),yield e.flash_defl_block(d,f,3*a),c=c.slice(G),f+=1;h=(new Date).getTime()-h;if((yield e.flash_md5sum(o,s))!==r)throw new Error("MD5 of file does not match data in flash!");yield e.flash_begin(0,0),yield e.flash_defl_finish(!1),yield e.hard_reset(),e.progressHandle(e.tag,e.progresscb,100)}))()}}const te=class{constructor(e,t,n,o,c){const r=new X(e);this.currentTag=c,this.esptool=new ee(r,t,n,o,c)}bootLoad(e,t){var n=this;return(0,q.Z)((function*(){try{J.init(),n.esptool.initEsp(),yield n.esptool.write_flash(),e(n.currentTag,t,null,(()=>{}))}catch(o){e(n.currentTag,t,o,null)}}))()}};var ne=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};let oe=null;class ce{constructor(){this.tag=(new Date).getTime()}call(e,t,n,o){oe===e&&t(n,o)}progress(e,t,n){oe===e&&t(n)}}const re=function(e,t,n,o,c){return ne(this,void 0,void 0,(function*(){const c=new ce;oe=c.tag;try{new te(e,t,c.progress,n,oe).bootLoad(c.call,o)}catch(e){o("new esp drivers fail.")}}))};let se="esptoolByExec";const ie=e=>{window.uploadFirmwareMode=se=e},ae=function(){},le=function(e,t,n,o,c,r){c=c||{};const s=function(){re(e,t,n,o,c)};if(!b.ZP.envUtils.isWindows||"esptoolByExec"!==se||"esptoolByExec"!==c.driverName)return void s();if(!r)return void o("esptoolByExec service not available");if(!e||!e.options)return void o("port not found");r.sendMessage({connectType:"esptoolByExec",cmd:"",params:{}},((e,t)=>{e&&e.toString().includes("unknown")?s():i()}));const i=function(){r.runtime.on("disconnect",((e,t)=>{ie("js")}));const s={connectType:"esptoolByExec",cmd:"upload",params:{options:Object.assign({port:e,data:t},c)}};e.close((()=>{r.sendMessage(s,((e,t)=>{if(e){if(ie("js"),o(e),e.toString().includes("unknown"))return void ae()}else o(null,t)}))}),!0),r.runtime.on("esptoolByExec.progress",(e=>{n(e.percent)})),r.runtime.on("esptoolByExec.portDisconnect",(()=>{ae()}))}},de={stk500v1:R,stk500v2:F,esptool:re,esptoolByExec:le};const fe=new class{constructor(){this.compilers={},this.uploadDriver={},this.firmwareDrivers={};for(const e in h)this.compilers[e]=h[e];for(const e in B)this.uploadDriver[e]=B[e];for(const e in de)this.firmwareDrivers[e]=de[e]}addUploadDriver(e,t){this.uploadDriver[e]=t}getUploadDriver(e){return this.uploadDriver[e]}addFirmwareDriver(e,t){this.firmwareDrivers[e]=t}getFirmwareDriver(e){return this.firmwareDrivers[e]}addMiddleware(e,t){this.compilers[e]=t}getMiddleware(e){return this.compilers[e]}},ue=fe;var he=function(e,t,n,o){return new(n||(n=Promise))((function(c,r){function s(e){try{a(o.next(e))}catch(e){r(e)}}function i(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}a((o=o.apply(e,t||[])).next())}))};const me=e=>Math.round(e);class pe{static setSerialport(e,t,n){this.serialport=new Proxy(Object.assign(Object.assign({},e),{connectService:t,channel:n}),{get:(t,n)=>n in t?t[n]:n in e?e[n]:void 0})}getDeviceId(){return o.Z.vmCtx.target.deviceId}pickOptionFromTarget(e,t){return(0,c.isPlainObject)(e)&&e.name===t?Object.assign({},e.options||{}):{}}getUploadOptions(){const e=o.Z.blocklyCtx.getExt(),{originalInfo:t={},id:n}=e,{targets:r}=t,s=o.Z.extCtx.exts,i=(0,c.cloneDeep)({firmware:r.options.firmware||{},upload:r.options.upload||{}});for(const[e,t]of s){if(e===n)continue;const o=i.upload.middlewares,r=t.originalInfo.targets;if((0,c.isArray)(r))for(const e of r)if(e.name===n){const{upload:t}=e.options||{},n=t.middlewares||{};if(0===Object.keys(n).length)continue;for(const e of n){const t=e.name,n=(0,c.findIndex)(o,(e=>e.name===t));-1===n?o.push(e):o[n]=(0,c.mergeWith)(o[n],e,((e,t)=>{for(const n in t)e[n]||(e[n]=t[n]),Array.isArray(e[n])&&Array.isArray(t[n])&&(e[n]=[...e[n],...t[n]]);return e}))}}}return i}getDriverByName(e,t){let n;return n=t?ue.getFirmwareDriver(e):ue.getUploadDriver(e),(e,t,o,c,r,s,i)=>he(this,void 0,void 0,(function*(){const t=pe.serialport;if(e.workspace){n(t,o,r,((e,t)=>{e?i(e):s()}))}else{n(t,e,o,((e,t)=>{e?r(e):c()}))}}))}getUploadDriver(e,t){const n=e.driver.func||e.driver.name;return"string"==typeof n?this.getDriverByName(n,t):"function"==typeof n?n:void 0}log(e){}}class ge extends pe{static get instance(){return ge._instance||(ge._instance=new ge),ge._instance}doUpload(e,t,n){return he(this,void 0,void 0,(function*(){const c=this.getUploadOptions().firmware||{},r=this.getUploadDriver(c,!0);if(!r)return;const s=this.getDeviceId();return yield o.Z.extCtx.emitExtHandler("beforeFirmwareUpdate",s),new Promise(((c,i)=>{r(o.Z.appCtx,o.Z.deviceCtx.getEditingTarget(o.Z.vmCtx.target),e,n,(e=>{t(me(e))}),(()=>he(this,void 0,void 0,(function*(){n("finish uploading......"),yield o.Z.extCtx.emitExtHandler("afterFirmwareUpdate",s),c(!0)}))),(e=>{i(e)}))}))}))}}class be extends pe{static get instance(){return be._instance||(be._instance=new be),be._instance}getMiddlewareByName(e){const t=ue.getMiddleware(e);if(!t)throw new Error(`cannot find middleware of ${e}`);return(e,n,o,c,r,s)=>he(this,void 0,void 0,(function*(){const e={code:o,options:c};try{const n=yield t(e,r,s);return n.code?n.code:o}catch(e){this.log(e.toString())}}))}runMiddlewares(e,t){return he(this,void 0,void 0,(function*(){const{appCtx:n,deviceCtx:c}=o.Z;for(const r of e){const{func:e,name:s,params:i}=r,a=e||this.getMiddlewareByName(s);if(!a)throw new Error(`can not find the middle of ${s} `);this.log(`processing code by middleware of ${s}`);try{t=yield a(n,c.getEditingTarget(o.Z.vmCtx.target),t,i,this.log)}catch(e){this.log(e.toString())}}return t}))}doUpload(e,t,n,c,r){return he(this,void 0,void 0,(function*(){this.log=n;const s=this.getUploadOptions().upload;if(!s)throw new Error("cannot find target.options.upload");this.log("start processing code......");const i=s.middlewares;if(Array.isArray(i)&&(e=yield this.runMiddlewares(i,e)),!e)return;this.log("processing code completed");const a=this.getUploadDriver(s,!1);if(!a)throw new Error("wrong type of targets.info.upload.uploadDriver for extension");this.log("parse code upload by driver"),this.log("start uploading......");const l=o.Z.vmCtx.target.deviceId;yield o.Z.extCtx.emitExtHandler("beforeCodeUpload",l),a(o.Z.appCtx,o.Z.deviceCtx.getEditingTarget(o.Z.vmCtx.target),e,n,(e=>{t(me(e))}),(()=>he(this,void 0,void 0,(function*(){yield o.Z.extCtx.emitExtHandler("afterCodeUpload",l),c(),this.log("finish uploading......")}))),(e=>{r(e)}))}))}}},60768:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(36808),c=n.n(o);const r=class{constructor(){let e=window.location.hostname;const t=e.match(/(makeblock\.com|mblock\.cc)/);t&&(e=t[0]),this.config={domain:e,expires:365}}set(e,t){this.remove(e),c().set(e,t,this.config)}get(e){const t=c().get(e);try{return t?JSON.parse(t):""}catch(e){return t}}remove(e){c().remove(e,this.config)}};var s=n(49692);const i=r;const a=new class extends i{setToken(e){e&&this.set(s.Z.USER_TOKEN_KEY,e)}get token(){return this.get(s.Z.USER_TOKEN_KEY)}get accessToken(){return this.get(s.Z.USER_ACCESS_ACCESSTOKEN_KEY)}setExampleKey(e){this.set(s.Z.EXAMPLE_KEY,e)}get exampleKey(){return this.get(s.Z.EXAMPLE_KEY)}setDefaultDeviceKey(e){this.set(s.Z.DEFAULT_DEVICE_KEY,e)}get defaultDeviceKey(){return this.get(s.Z.DEFAULT_DEVICE_KEY)}setFeedbackData(e){this.set(s.Z.FEEDBACK_CACHE_KEY,e)}get feedbackData(){return this.get(s.Z.FEEDBACK_CACHE_KEY)}get deviceId(){return this.get(s.Z.CONNECT_DEVICE_ID_KEY)}removeToken(){this.remove(s.Z.USER_TOKEN_KEY)}setIsIntl(e){this.set(s.Z.INTERNATIONAL_VERSION,e)}get isIntl(){return this.get(s.Z.INTERNATIONAL_VERSION)}}},72463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(60768),c=n(96486),r=n(49692),s=n(33372);const i=class{static get isWeb(){return!(0,c.has)(window,"window.MbApi.file")}static set isInternational(e){o.Z.set(r.Z.INTERNATIONAL_VERSION,e)}static get isInternational(){return"zh"!==s.Z.international}static get getInternational(){return this.isInternational?"en":"zh"}static get appVersion(){return"5.4.22"}static get appTheme(){return o.Z.get(r.Z.APP_THEME)}static get enablePreview(){return window.IS_PREVIEW_EXTENSION}static get isWindows(){return"Win32"===navigator.platform}}},61903:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});class o extends Error{constructor(e){super(e||"cancel choose file."),this.name="CancelChooseFile"}}},94960:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});const o=e=>{const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}},58617:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(94960),c=n(62520),r=n.n(c),s=n(96486),i=n(61903),a=n(48764).Buffer;const l={extractFileName:function(e){return e.split(".",1)[0]},getFileSuffix:e=>{try{return r().extname(e).replace(".","")}catch(e){return""}},getFileName:e=>{try{const t=e.replace(/\\/g,"/");return r().basename(t).replace(r().extname(t),"")}catch(t){return e}},readAsArrayBuffer:e=>e instanceof Blob||e instanceof File?new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>{t(a.from(new Uint8Array(o.result)))},o.onerror=e=>{n(e)},o.readAsArrayBuffer(e)})):e,chooseFile:e=>new Promise(((t,n)=>{let c=null,r=!1;const s=document.createElement("input");s.style.position="absolute",s.style.visibility="hidden",s.style.top="-100%",s.setAttribute("type","file"),e&&s.setAttribute("accept",e);const a=e=>{if(clearTimeout(c),e){const n=e.target.files;if(n.length>0)return t(n[0]),void s.remove()}n(new i.P)};s.addEventListener("click",(()=>{r=!0}),{once:!0}),s.addEventListener("change",a,{once:!0}),window.addEventListener("focus",(()=>{r&&(r=!1,clearTimeout(c),c=setTimeout((()=>{a(),s.remove()}),500))}),{once:!0}),document.body.appendChild(s),(0,o.S)(s)})),readLocalFile:(e,t)=>new Promise(((n,o)=>{const c=new FileReader;c.onprogress=e=>{(0,s.isFunction)(t)&&t({loaded:e.loaded,total:e.total})},c.onload=()=>{n(c.result)},c.onerror=e=>{o(e)},c.readAsArrayBuffer(e)}))}},66675:(e,t,n)=>{"use strict";n.d(t,{zT:()=>w,Fp:()=>y,ZP:()=>x,Ez:()=>b,Yc:()=>v,rk:()=>_,oh:()=>E,rw:()=>k});var o=n(96486),c=n(94960);const r={svgElementToBase64:e=>{const t=(new XMLSerializer).serializeToString(e);return`data:image/svg+xml;utf-8,${encodeURIComponent(t)}`},svgElementToBlob:e=>{const t=(new XMLSerializer).serializeToString(e);return new Blob([t],{type:"image/svg+xml;charset=utf-8"})},base64ToArrayBuffer:e=>{const t=window.atob(e),n=t.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=t.charCodeAt(e);return o.buffer},base64ToBlob:e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]);let c=o.length;const r=new Uint8Array(c);for(;c--;)r[c]=o.charCodeAt(c);return new Blob([r],{type:n})},base64ToText:e=>{if("string"==typeof e)return window.decodeURIComponent(window.escape(window.atob(e)))},base64ToUint8Array:e=>{if("string"==typeof e)return new Uint8Array(window.atob(e).split(","))}};var s=n(58617);const i=(e,t)=>{if(navigator.msSaveOrOpenBlob)return void navigator.msSaveOrOpenBlob(t,e);const n=window.URL.createObjectURL(t);a(n,e),window.URL.revokeObjectURL(n)},a=(e,t)=>{const n=document.createElement("a");n.setAttribute("download",t||"image.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),(0,c.S)(n)},l={downloadText:(e,t)=>{const n=new Blob([t],{type:"text/plain;charset=utf-8"});i(e,n)},downloadBlob:i,forceDownload:a};var d=n(72463),f=n(31795),u=n.n(f);class h{static get info(){const{layout:e,name:t,os:n,version:o}=u();return{os:n,name:t,layout:e,version:o}}static get isChromeOS(){return!(!u().os||!u().os.family)&&u().os.family.indexOf("Chrome OS")>-1}static get isLinuxOS(){const e=["Linux","Ubuntu Chromium","Ubuntu"];return!(!u().os||!u().os.family)&&e.indexOf(u().os.family)>-1}static get isMacOS(){if(u().os&&u().os.family){return/Mac|OS X/.test(u().os.family)}return!1}static getPlatform(){return u().os?u().os.family:""}}h.isChrome="Chrome"===u().name;const m=h;var p=n(34155),g=n(48764).Buffer;const b=e=>{if(e.touches&&e.touches[0]){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches[0]){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}return{x:e.clientX,y:e.clientY}},k=(e,t=!1)=>{const n=["//extservice.makeblock.com/","//planet.mblock.cc/","//extservice.mblock.cc/","//extapi.makeblock.com/","//extapi.mblock.cc/","//msapi.mblock.cc/","//iothub.makeblock.com/","//mweather.makeblock.com/"];if("string"!=typeof e&&(e=t?e.en:e.zh),t&&(p.env.PRODUCTION||p.env.PREVIEW)){-1!==e.indexOf("//apimblock.makeblock.com/")&&(e=e.replace("apimblock","api.mblock"));let t=!0;for(const o of n)-1!==e.indexOf(o)&&(t=!1);t&&(e=e.replace("//","//eu."))}return e},w=e=>g.from(e).toString(),v=e=>new Promise((t=>{let n=null;const o=()=>{n=requestAnimationFrame(o),e()&&(cancelAnimationFrame(n),t())};o()})),y=e=>{n(20640)(e)},E=e=>{const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),(0,c.S)(t)},_=(e,t,n)=>{if((0,o.isArray)(n)){const c=(e,t,n)=>(0,o.isEqual)((0,o.get)(e,n),(0,o.get)(t,n));let r=!0;e:for(const s of n)if((0,o.isArray)(e)&&(0,o.isArray)(t)){for(let n=0;n<e.length;n++)if(!c(e,t,`[${n}]${s}`)){r=!1;continue e}}else if(!c(e,t,s))return!1;return r}return(0,o.isEqual)(e,t)},x=Object.assign(Object.assign(Object.assign({isBlob:e=>"[object Blob]"===Object.prototype.toString.call(e),genUUID:(e,t)=>{const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];let c;if(t=t||n.length,e)for(c=0;c<e;c++)o[c]=n[0|Math.random()*t];else{let e;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",c=0;c<36;c++)o[c]||(e=0|16*Math.random(),o[c]=n[19===c?3&e|8:e])}return o.join("")},formatDate:e=>{const t=e=>1===e.toString().length?"0"+e:e,n=new Date(1e3*e),o=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),s=n.getHours(),i=n.getMinutes(),a=n.getSeconds();return`${o}-${t(c)}-${t(r)} ${t(s)}:${t(i)}:${t(a)}`},formatString:(e,...t)=>{if(0===t.length)return e;for(let n=0;n<t.length;n++)e=e.replace(new RegExp("\\{"+n+"\\}","g"),t[n]);return e},safeHttps:e=>"string"!=typeof e?e:-1!==e.indexOf("http")?e.replace("http:","https:"):e,getUrlParams:e=>{let t=e||window.location.search||window.location.hash;if(!t||"#/"===t)return{};0===t.indexOf("#/")&&(t=t.substring(2));const n=new URLSearchParams(t),o={};return n.forEach(((e,t)=>{o[t]=e})),o},envUtils:d.Z,platform:m,delay:e=>new Promise((t=>{setTimeout((()=>{t(!0)}),e)})),createPromiseFunc:e=>function(...t){return new Promise(((n,o)=>{e(...t,((e,t)=>{e&&o(e),n(t)}))}))}},l),r),s.Z)},24184:(e,t,n)=>{var o={"./development/en/domain.json":13355,"./development/zh/domain.json":17407,"./production/en/domain.json":95798,"./production/zh/domain.json":67243,"./test/en/domain.json":55328,"./test/zh/domain.json":52937};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=r,e.exports=c,c.id=24184},95529:(e,t,n)=>{var o={"./development/en/link.json":50842,"./development/zh/link.json":78537,"./production/en/link.json":71899,"./production/zh/link.json":79994,"./test/en/link.json":20216,"./test/zh/link.json":66605};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}c.keys=function(){return Object.keys(o)},c.resolve=r,e.exports=c,c.id=95529},46601:()=>{},77020:()=>{},52361:()=>{},94616:()=>{},13355:e=>{"use strict";e.exports=JSON.parse('{"passport2":"https://passport-dev.mblock.cc/","iot":"https://iothub-dev.makeblock.com/","weather":"https://mweather-dev.makeblock.com/","air":"http://msapi-dev.makeblock.com/","mblock":"https://apimblock-dev.makeblock.com/","mblock_edu":"https://apimblock-dev.makeblock.com/","qiniu":"http://up-z2.qiniu.com/","gateway":"https://classroom-dev.makeblock.com/","cloud":"https://planet-dev.makeblock.com/","ext":"//extapi-dev.makeblock.com/api/v2/","extservice":"//extservice-dev.makeblock.com/","box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-dev.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},50842:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.cc","connect_faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","guide":"http://www.mblock.cc/doc/en/","download":"http://www.mblock.cc/software/mblock/?noredirect=en_US","driver":"https://www.mblock.cc/en-us/download/mlink","crdriver":"https://www.mblock.cc/en-us/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection","cloud_data":"http://127.0.0.1:8080/#/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":"https://planet-dev.makeblock.com/user","community_convention":"http://www.mblock.cc/convention/","community_homePage":"https://dev-web.makeblock.com/ide/index.html","mblock_web":"https://dev-web.makeblock.com/ide/index.html","project_view":"https://planet-dev.makeblock.com/project/","project_share":"https://planet-dev.makeblock.com/project/projectshare/","open_source":"http://www.mblock.cc/doc/en/open-source/open-source.html","mblock_homePage":"http://mblock.cc/","extBuild_homePage":"https://dev-web.makeblock.com/ext/index.html","mblock_downloadPage":"http://www.mblock.cc/mblock-software/","join":"http://education.makeblock.com/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/en/faq/bluetooth.html","makex":"https://www.makex.io","python_editor":"https://python.mblock.cc","python_questionnaire":"https://jinshuju.net/f/xOz1FC?x_field_1=ide","courses":"https://education.makeblock.com/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')},17407:e=>{"use strict";e.exports=JSON.parse('{"passport2":"https://passport-dev.makeblock.com/","iot":"https://iothub-dev.makeblock.com/","weather":"https://mweather-dev.makeblock.com/","air":"http://msapi-dev.makeblock.com/","mblock":"https://apimblock-dev.makeblock.com/","mblock_edu":"https://apimblock-dev.makeblock.com/","qiniu":"http://up-z2.qiniu.com/","gateway":"https://classroom-dev.makeblock.com/","cloud":"https://mblock-dev.makeblock.com/","ext":"//extapi-dev.makeblock.com/api/v2/","extservice":"//extservice-dev.makeblock.com/","box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-dev.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},78537:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.makeblock.com/zh-cn/","connect_faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","guide":"http://www.mblock.cc/doc/zh/","download":"http://www.mblock.cc/zh-home/software/mblock/?noredirect=zh_CN","driver":"https://www.mblock.cc/zh-cn/download/mlink","crdriver":"https://www.mblock.cc/zh-cn/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","cloud_data":"http://127.0.0.1:8080/#/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":"https://mblock-dev.makeblock.com/user","community_convention":"http://www.mblock.cc/zh-home/convention/","community_homePage":"https://dev-web.makeblock.com/ide/index.html","mblock_web":"https://dev-web.makeblock.com/ide/index.html","project_view":"https://mblock-dev.makeblock.com/project/","project_share":"https://mblock-dev.makeblock.com/project/projectshare/","open_source":"http://www.mblock.cc/doc/zh/open-source/open-source.html","mblock_homePage":"http://mblock.cc/","extBuild_homePage":"https://dev-web.makeblock.com/ext/index.html","mblock_downloadPage":"http://www.mblock.cc/zh-home/software/?noredirect=zh-CN","join":"http://education.makeblock.com/zh-hans/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","makex":"https://www.makex.cc","python_editor":"https://python.makeblock.com","python_questionnaire":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","courses":"https://edu.makeblock.com/#/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')},95798:e=>{"use strict";e.exports=JSON.parse('{"iot":"https://iothub.makeblock.com/","weather":"https://mweather.makeblock.com/","air":"https://msapi.mblock.cc/","mblock":"https://apimblock.makeblock.com/","mblock_edu":"https://apimblock.makeblock.com/","gateway":"https://classroom.makeblock.com/","cloud":"https://planet.mblock.cc/","ext":"https://extapi.mblock.cc/api/v2/","extservice":"https://extservice.mblock.cc/","box":"http://platforms.makeblock.com/","steam-platform":"https://org-api-test.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},71899:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.cc","connect_faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","guide":"https://www.yuque.com/makeblock-help-center-en/mblock-5/quick-start","download":"http://www.mblock.cc/software/mblock/?noredirect=en_US","driver":{"mac":"https://dl.makeblock.com/mblock5/darwin/mLink2-V2.1.1.dmg","win":"https://dl.makeblock.com/mblock5/win32/mLink2-V2.1.1.exe"},"crdriver":"https://www.mblock.cc/en-us/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection","cloud_data":"https://web-iothub.mblock.cc/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":"https://planet.mblock.cc/user","community_convention":"https://www.mblock.cc/convention/","community_homePage":"https://planet.mblock.cc","mblock_web":"https://ide.mblock.cc/index.html","project_view":"https://planet.mblock.cc/project/","project_share":"https://planet.mblock.cc/project/projectshare/","open_source":"https://www.mblock.cc/doc/en/open-source/open-source.html","mblock_homePage":"https://mblock.cc/","extBuild_homePage":"https://ext.mblock.cc/index.html","mblock_downloadPage":"https://www.mblock.cc/mblock-software/","join":"http://education.makeblock.com/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/en/faq/bluetooth.html","makex":"https://www.makex.io","python_editor":"https://python.mblock.cc","python_questionnaire":"https://jinshuju.net/f/xOz1FC?x_field_1=ide","courses":"https://education.makeblock.com/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')},67243:e=>{"use strict";e.exports=JSON.parse('{"iot":"https://iothub.makeblock.com/","weather":"https://mweather.makeblock.com/","air":"https://msapi.makeblock.com/","mblock":"https://apimblock.makeblock.com/","mblock_edu":"https://apimblock.makeblock.com/","gateway":"https://classroom.makeblock.com/","cloud":"https://mblock.makeblock.com/","ext":"https://extapi.makeblock.com/api/v2/","extservice":"https://extservice.makeblock.com/","box":"http://platforms.makeblock.com/","steam-platform":"https://org-api-test.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},79994:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.makeblock.com/zh-cn/","connect_faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","guide":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/quick-start","download":"http://www.mblock.cc/zh-home/software/mblock/?noredirect=zh_CN","driver":{"mac":"https://dl.makeblock.com/mblock5/darwin/mLink2-V2.1.1.dmg","win":"https://dl.makeblock.com/mblock5/win32/mLink2-V2.1.1.exe"},"crdriver":"https://www.mblock.cc/zh-cn/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","cloud_data":"https://web-iothub.mblock.cc/","feedback":"http://feedback.makeblock.com/?v=mblock","ifttt":"https://ifttt.com/my_applets","protocol":"http://www.makeblock.com/cn/agreement/","homepage":"https://mblock.makeblock.com/user","community_convention":"https://www.mblock.cc/zh-home/convention/","community_homePage":"https://mblock.makeblock.com","mblock_web":"https://ide.makeblock.com/index.html","project_view":"https://mblock.makeblock.com/project/","project_share":"https://mblock.makeblock.com/project/projectshare/","open_source":"https://www.mblock.cc/doc/zh/open-source/open-source.html","mblock_homePage":"https://mblock.cc/","extBuild_homePage":"https://ext.makeblock.com/","mblock_downloadPage":"https://www.mblock.cc/zh-home/software/?noredirect=zh-CN","join":"http://education.makeblock.com/zh-hans/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","makex":"https://www.makex.cc","python_editor":"https://python.makeblock.com","python_questionnaire":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","courses":"https://edu.makeblock.com/#/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')},55328:e=>{"use strict";e.exports=JSON.parse('{"passport2":"https://passport-test.mblock.cc/","iot":"https://iothub-test.makeblock.com/","weather":"https://mweather-test.makeblock.com/","air":"https://msapi-test.mblock.cc/","mblock":"https://apimblock-test.makeblock.com/","mblock_edu":"https://apimblock-test.makeblock.com/","gateway":"https://classroom-test.makeblock.com/","cloud":"https://community-test.mblock.cc/","ext":"http://extapi-test.mblock.cc/api/v2/","extservice":"https://extservice-test.mblock.cc/","box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-test.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},20216:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.cc","connect_faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","faq":"http://www.mblock.cc/doc/en/faq/mblock-5-+-codey-rocky-faq.html","guide":"https://www.yuque.com/makeblock-help-center-en/mblock-5/quick-start","download":"http://www.mblock.cc/download/?noredirect=en_US","driver":{"mac":"https://dl.makeblock.com/mblock5/darwin/mLink2-V2.1.1.dmg","win":"https://dl.makeblock.com/mblock5/win32/mLink2-V2.1.1.exe"},"crdriver":"https://www.mblock.cc/en-us/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-en/mblock-5/pc-v5.2.0-connection","cloud_data":"http://web-iothub-test.makeblock.com/#/","feedback":"http://feedback.makeblock.com/?v=mBlock","ifttt":"https://ifttt.com/my_applets","homepage":"https://community-test.mblock.cc/user","community_convention":"http://www.mblock.cc/convention/","community_homePage":"https://test-web.mblock.cc/ide/index.html","mblock_web":"https://test-web.mblock.cc/ide/index.html","project_view":"https://community-test.mblock.cc/project/","project_share":"https://community-test.mblock.cc/project/projectshare/","open_source":"http://www.mblock.cc/doc/en/open-source/open-source.html","mblock_homePage":"http://mblock.cc/","extBuild_homePage":"https://test-web.mblock.cc/ext/index.html","mblock_downloadPage":"http://www.mblock.cc/mblock-software/","join":"http://education.makeblock.com/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/en/faq/bluetooth.html","makex":"https://www.makex.io","python_editor":"https://python.mblock.cc","python_questionnaire":"https://jinshuju.net/f/xOz1FC?x_field_1=ide","courses":"https://education.makeblock.com/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')},52937:e=>{"use strict";e.exports=JSON.parse('{"passport2":"https://passport-test.makeblock.com/","iot":"https://iothub-test.makeblock.com/","weather":"https://mweather-test.makeblock.com/","air":"https://msapi-test.makeblock.com/","mblock":"https://apimblock-test.makeblock.com/","mblock_edu":"https://apimblock-test.makeblock.com/","gateway":"https://classroom-test.makeblock.com/","cloud":"https://mblock-test.makeblock.com/","ext":"http://extapi-test.makeblock.com/api/v2/","extservice":"https://extservice-test.makeblock.com/","box":"http://platforms-test.makeblock.com/","steam-platform":"https://org-api-test.makeblock.com/","assets":"https://res-cn.makeblock.com/mblock/static/"}')},66605:e=>{"use strict";e.exports=JSON.parse('{"logo":"https://mblock.makeblock.com/zh-cn/","connect_faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","faq":"http://www.mblock.cc/doc/zh/faq/mblock5cheng-xiao-ben-faq.html","guide":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/quick-start","download":"http://www.mblock.cc/zh-home/download/","driver":{"mac":"https://dl.makeblock.com/mblock5/darwin/mLink2-V2.1.1.dmg","win":"https://dl.makeblock.com/mblock5/win32/mLink2-V2.1.1.exe"},"crdriver":"https://www.mblock.cc/zh-cn/download/mlink","noserver_doc":"https://www.yuque.com/makeblock-help-center-zh/mblock-5/pc-v5.2.0-connection","cloud_data":"http://web-iothub-test.makeblock.com/#/","feedback":"http://feedback.makeblock.com/?v=mBlock","ifttt":"https://ifttt.com/my_applets","homepage":"https://mblock-test.makeblock.com/user","community_convention":"http://www.mblock.cc/zh-home/convention/","community_homePage":"https://test-web.makeblock.com/ide/index.html","mblock_web":"https://test-web.makeblock.com/ide/index.html","project_view":"https://mblock-test.makeblock.com/project/","project_share":"https://mblock-test.makeblock.com/project/projectshare/","open_source":"http://www.mblock.cc/doc/zh/open-source/open-source.html","mblock_homePage":"http://mblock.cc/","extBuild_homePage":"https://test-web.makeblock.com/ext/index.html","mblock_downloadPage":"http://www.mblock.cc/zh-home/software/?noredirect=zh-CN","join":"http://education.makeblock.com/zh-hans/trainingcenters/join/","ble_help":"https://www.mblock.cc/doc/zh/faq/bluetooth.html","makex":"https://www.makex.cc","python_editor":"https://python.makeblock.com","python_questionnaire":"https://jinshuju.net/f/3YFiV0?x_field_1=ide","courses":"https://edu.makeblock.com/#/resource/","beta_feedback":"https://www.yuque.com/mblock-5/topics"}')}},s={};function i(e){var t=s[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var n=s[e]={id:e,loaded:!1,exports:{}};try{var o={id:e,module:n,factory:r[e],require:i};i.i.forEach((function(e){e(o)})),n=o.module,o.factory.call(n.exports,n,n.exports,o.require)}catch(e){throw n.error=e,e}return n.loaded=!0,n.exports}i.m=r,i.c=s,i.i=[],i.amdO={},e=[],i.O=(t,n,o,c)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,c]=e[d],s=!0,a=0;a<n.length;a++)(!1&c||r>=c)&&Object.keys(i.O).every((e=>i.O[e](n[a])))?n.splice(a--,1):(s=!1,c<r&&(r=c));if(s){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[n,o,c]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var c=Object.create(null);i.r(c);var r={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,i.d(c,r),c},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"js/chunk/"+({36:"port-manager",128:"TutorialModal",184:"script-service",188:"scratch-widgets",218:"blocklyctx",280:"scratch-sb1-converter",348:"ext-manager",377:"vmctx",404:"monaco-editor",430:"requirejs",456:"lazyloadui",461:"builtin-py-snippets",463:"scratch-paint",491:"connect-service",505:"scratch-parser",527:"sound-editor",556:"ali-oss",693:"pinyin",832:"locales",905:"stagectx",929:"gui",965:"reducers",968:"extctx",976:"reporter"}[e]||e)+"."+{3:"f5101265",36:"95c4a40d",76:"a99b03ca",86:"b9141a0a",99:"9bcdc3de",128:"e292790b",130:"c828ce12",133:"d274446a",134:"dd6a7aeb",141:"170322dd",183:"76b6ed7f",184:"73c99cb2",188:"4d87faea",193:"6d9108c7",218:"f2e16264",280:"7a69ada0",287:"44eabe5b",315:"0d9c5fdb",345:"7b00bd71",348:"2f26c74e",368:"65597b85",377:"e3cc824f",404:"d2aec1d0",430:"ac71c2e3",456:"fca4a69c",461:"7fc6b224",463:"8c0b9f76",491:"6afd195a",505:"35841bc3",527:"f5fea710",556:"53a40fe1",570:"b04e8c69",681:"08acb8b7",693:"82c96c15",717:"d77ecda2",733:"ecd77867",832:"2ee103a4",835:"da04f72c",905:"648a5de9",925:"b8c2444e",929:"ecadc095",951:"b562493f",960:"8568e77a",965:"e5610854",968:"60b5f9b9",976:"b246116c"}[e]+".js",i.hu=e=>e+"."+i.h()+".hot-update.js",i.hmrF=()=>"index."+i.h()+".hot-update.json",i.h=()=>"8a22578354ff9f3cada7",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},c="mblock-next:",i.l=(e,t,n,r)=>{if(o[e])o[e].push(t);else{var s,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var f=l[d];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==c+n){s=f;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",c+n),s.src=e),o[e]=[t];var u=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var c=o[e];if(delete o[e],s.parentNode&&s.parentNode.removeChild(s),c&&c.forEach((e=>e(n))),t)return t(n)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),a&&document.head.appendChild(s)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e,t,n,o,c={},r=i.c,s=[],a=[],l="idle";function d(e){l=e;for(var t=[],n=0;n<a.length;n++)t[n]=a[n].call(null,e);return Promise.all(t)}function f(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return f(e)}))}function u(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return d("check").then(i.hmrM).then((function(o){return o?d("prepare").then((function(){var c=[];return t=[],n=[],Promise.all(Object.keys(i.hmrC).reduce((function(e,t){return i.hmrC[t](o.c,o.r,o.m,e,n,c),e}),[])).then((function(){return f((function(){return e?m(e):d("ready").then((function(){return c}))}))}))})):d(p()?"ready":"idle").then((function(){return null}))}))}function h(e){return"ready"!==l?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):m(e)}function m(e){e=e||{},p();var t=n.map((function(t){return t(e)}));n=void 0;var c=t.map((function(e){return e.error})).filter(Boolean);if(c.length>0)return d("abort").then((function(){throw c[0]}));var r=d("dispose");t.forEach((function(e){e.dispose&&e.dispose()}));var s,i=d("apply"),a=function(e){s||(s=e)},l=[];return t.forEach((function(e){if(e.apply){var t=e.apply(a);if(t)for(var n=0;n<t.length;n++)l.push(t[n])}})),Promise.all([r,i]).then((function(){return s?d("fail").then((function(){throw s})):o?m(e).then((function(e){return l.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):d("idle").then((function(){return l}))}))}function p(){if(o)return n||(n=[]),Object.keys(i.hmrI).forEach((function(e){o.forEach((function(t){i.hmrI[e](t,n)}))})),o=void 0,!0}i.hmrD=c,i.i.push((function(m){var p,g,b,k,w=m.module,v=function(n,o){var c=r[o];if(!c)return n;var i=function(t){if(c.hot.active){if(r[t]){var i=r[t].parents;-1===i.indexOf(o)&&i.push(o)}else s=[o],e=t;-1===c.children.indexOf(t)&&c.children.push(t)}else s=[];return n(t)},a=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&"e"!==u&&Object.defineProperty(i,u,a(u));return i.e=function(e){return function(e){switch(l){case"ready":return d("prepare"),t.push(e),f((function(){return d("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},i}(m.require,m.id);w.hot=(p=m.id,g=w,k={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=e!==p,_requireSelf:function(){s=g.parents.slice(),e=b?void 0:p,i(p)},active:!0,accept:function(e,t,n){if(void 0===e)k._selfAccepted=!0;else if("function"==typeof e)k._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var o=0;o<e.length;o++)k._acceptedDependencies[e[o]]=t||function(){},k._acceptedErrorHandlers[e[o]]=n;else k._acceptedDependencies[e]=t||function(){},k._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)k._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)k._declinedDependencies[e[t]]=!0;else k._declinedDependencies[e]=!0},dispose:function(e){k._disposeHandlers.push(e)},addDisposeHandler:function(e){k._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=k._disposeHandlers.indexOf(e);t>=0&&k._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":n=[],Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](p,n)})),d("ready");break;case"ready":Object.keys(i.hmrI).forEach((function(e){i.hmrI[e](p,n)}));break;case"prepare":case"check":case"dispose":case"apply":(o=o||[]).push(p)}},check:u,apply:h,status:function(e){if(!e)return l;a.push(e)},addStatusHandler:function(e){a.push(e)},removeStatusHandler:function(e){var t=a.indexOf(e);t>=0&&a.splice(t,1)},data:c[p]},e=void 0,k),w.parents=s,w.children=[],s=[],m.require=v})),i.hmrC={},i.hmrI={}})(),i.p="/",(()=>{var e=i.hmrS_jsonp=i.hmrS_jsonp||{826:0};i.f.j=(t,n)=>{var o=i.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var c=new Promise(((n,c)=>o=e[t]=[n,c]));n.push(o[2]=c);var r=i.p+i.u(t),s=new Error;i.l(r,(n=>{if(i.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var c=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+c+": "+r+")",s.name="ChunkLoadError",s.type=c,s.request=r,o[1](s)}}),"chunk-"+t,t)}};var t,n,o,c,r={};function s(e){return new Promise(((t,n)=>{r[e]=t;var o=i.p+i.hu(e),c=new Error;i.l(o,(t=>{if(r[e]){r[e]=void 0;var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading hot update chunk "+e+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,n(c)}}))}))}function a(r){function s(e){for(var t=[e],n={},o=t.map((function(e){return{chain:[e],id:e}}));o.length>0;){var c=o.pop(),r=c.id,s=c.chain,l=i.c[r];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:r};if(l.hot._main)return{type:"unaccepted",chain:s,moduleId:r};for(var d=0;d<l.parents.length;d++){var f=l.parents[d],u=i.c[f];if(u){if(u.hot._declinedDependencies[r])return{type:"declined",chain:s.concat([f]),moduleId:r,parentId:f};-1===t.indexOf(f)&&(u.hot._acceptedDependencies[r]?(n[f]||(n[f]=[]),a(n[f],[r])):(delete n[f],t.push(f),o.push({chain:s.concat([f]),id:f})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&e.push(o)}}i.f&&delete i.f.jsonpHmr,t=void 0;var l={},d=[],f={},u=function(e){};for(var h in n)if(i.o(n,h)){var m,p=n[h],g=!1,b=!1,k=!1,w="";switch((m=p?s(h):{type:"disposed",moduleId:h}).chain&&(w="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":r.onDeclined&&r.onDeclined(m),r.ignoreDeclined||(g=new Error("Aborted because of self decline: "+m.moduleId+w));break;case"declined":r.onDeclined&&r.onDeclined(m),r.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+w));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(m),r.ignoreUnaccepted||(g=new Error("Aborted because "+h+" is not accepted"+w));break;case"accepted":r.onAccepted&&r.onAccepted(m),b=!0;break;case"disposed":r.onDisposed&&r.onDisposed(m),k=!0;break;default:throw new Error("Unexception type "+m.type)}if(g)return{error:g};if(b)for(h in f[h]=p,a(d,m.outdatedModules),m.outdatedDependencies)i.o(m.outdatedDependencies,h)&&(l[h]||(l[h]=[]),a(l[h],m.outdatedDependencies[h]));k&&(a(d,[m.moduleId]),f[h]=u)}n=void 0;for(var v,y=[],E=0;E<d.length;E++){var _=d[E],x=i.c[_];x&&(x.hot._selfAccepted||x.hot._main)&&f[_]!==u&&!x.hot._selfInvalidated&&y.push({module:_,require:x.hot._requireSelf,errorHandler:x.hot._selfAccepted})}return{dispose:function(){var t;o.forEach((function(t){delete e[t]})),o=void 0;for(var n,c=d.slice();c.length>0;){var r=c.pop(),s=i.c[r];if(s){var a={},f=s.hot._disposeHandlers;for(E=0;E<f.length;E++)f[E].call(null,a);for(i.hmrD[r]=a,s.hot.active=!1,delete i.c[r],delete l[r],E=0;E<s.children.length;E++){var u=i.c[s.children[E]];u&&((t=u.parents.indexOf(r))>=0&&u.parents.splice(t,1))}}}for(var h in l)if(i.o(l,h)&&(s=i.c[h]))for(v=l[h],E=0;E<v.length;E++)n=v[E],(t=s.children.indexOf(n))>=0&&s.children.splice(t,1)},apply:function(e){for(var t in f)i.o(f,t)&&(i.m[t]=f[t]);for(var n=0;n<c.length;n++)c[n](i);for(var o in l)if(i.o(l,o)){var s=i.c[o];if(s){v=l[o];for(var a=[],u=[],h=[],m=0;m<v.length;m++){var p=v[m],g=s.hot._acceptedDependencies[p],b=s.hot._acceptedErrorHandlers[p];if(g){if(-1!==a.indexOf(g))continue;a.push(g),u.push(b),h.push(p)}}for(var k=0;k<a.length;k++)try{a[k].call(null,v)}catch(t){if("function"==typeof u[k])try{u[k](t,{moduleId:o,dependencyId:h[k]})}catch(n){r.onErrored&&r.onErrored({type:"accept-error-handler-errored",moduleId:o,dependencyId:h[k],error:n,originalError:t}),r.ignoreErrored||(e(n),e(t))}else r.onErrored&&r.onErrored({type:"accept-errored",moduleId:o,dependencyId:h[k],error:t}),r.ignoreErrored||e(t)}}}for(var w=0;w<y.length;w++){var E=y[w],_=E.module;try{E.require(_)}catch(t){if("function"==typeof E.errorHandler)try{E.errorHandler(t,{moduleId:_,module:i.c[_]})}catch(n){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:_,error:n,originalError:t}),r.ignoreErrored||(e(n),e(t))}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:_,error:t}),r.ignoreErrored||e(t)}}return d}}}self.webpackHotUpdatemblock_next=(e,t,o)=>{for(var s in t)i.o(t,s)&&(n[s]=t[s]);o&&c.push(o),r[e]&&(r[e](),r[e]=void 0)},i.hmrI.jsonp=function(e,t){n||(n={},c=[],o=[],t.push(a)),i.o(n,e)||(n[e]=i.m[e])},i.hmrC.jsonp=function(r,l,d,f,u,h){u.push(a),t={},o=l,n=d.reduce((function(e,t){return e[t]=!1,e}),{}),c=[],r.forEach((function(n){i.o(e,n)&&void 0!==e[n]&&(f.push(s(n)),t[n]=!0)})),i.f&&(i.f.jsonpHmr=function(n,o){t&&!i.o(t,n)&&i.o(e,n)&&void 0!==e[n]&&(o.push(s(n)),t[n]=!0)})},i.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(i.p+i.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))},i.O.j=t=>0===e[t];var l=(t,n)=>{var o,c,[r,s,a]=n,l=0;if(r.some((t=>0!==e[t]))){for(o in s)i.o(s,o)&&(i.m[o]=s[o]);if(a)var d=a(i)}for(t&&t(n);l<r.length;l++)c=r[l],i.o(e,c)&&e[c]&&e[c][0](),e[r[l]]=0;return i.O(d)},d=self.webpackChunkmblock_next=self.webpackChunkmblock_next||[];d.forEach(l.bind(null,0)),d.push=l.bind(null,d.push.bind(d))})();var a=i.O(void 0,[592],(()=>i(77563)));a=i.O(a)})();
